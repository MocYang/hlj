(function(W,N){typeof exports=="object"&&typeof module<"u"?N(exports):typeof define=="function"&&define.amd?define(["exports"],N):(W=typeof globalThis<"u"?globalThis:W||self,N(W.mapv3d={}))})(this,function(W){"use strict";function N(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function Tt(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function V(r,n,e){return n&&Tt(r.prototype,n),e&&Tt(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}var Mt=function(){return"V0.1.29"},Vt=function(){return new Date().toLocaleString()},kr="DEV",_r=function(){var n=`%c \u{1F312}%c MapV3D %c \u56FE\u6D0B\u4E09\u7EF4\u5730\u56FE\u5E73\u53F0 %c

\u7248 \u672C \u53F7\uFF1A`.concat(Mt(),`
\u7F16\u8BD1\u65E5\u671F\uFF1A`).concat(Vt(),`
\u7248\u6743\u58F0\u660E\uFF1A
1. MapV3D\u7248\u6743\u5B8C\u5168\u5C5E\u4E8E "\u676D\u5DDE\u56FE\u6D0B\u4FE1\u606F\u79D1\u6280\u6709\u9650\u516C\u53F8"\u3002
2. MapV3D\u4E2Dmapv3d-src.*.js\u7A0B\u5E8F\u5305\uFF0C\u4EFB\u4F55\u4E2A\u4EBA\u548C\u673A\u6784\u5728\u9075\u5B88\u4E0B\u5217\u6761\u4EF6\u7684\u524D\u63D0\u4E0B\u6388\u6743\u6C38\u4E45\u4F7F\u7528\uFF1A
    1\uFF09\u4E0D\u8FDB\u884C\u4EFB\u4F55\u5F62\u5F0F\u7684\u7834\u89E3\u548C\u88C1\u526A\uFF0C\u7A0B\u5E8F\u5305\u5B8C\u6574\u5F15\u7528
    2\uFF09\u4FDD\u7559\u6B64\u7248\u6743\u4FE1\u606F\u5728\u63A7\u5236\u53F0\u8F93\u51FA
\u6211\u4EEC\u4FDD\u7559\u5BF9\u6B64\u7248\u6743\u4FE1\u606F\u7684\u6700\u7EC8\u89E3\u91CA\u6743\u3002
`),e='font-size: 17px;line-height: 1.5;font-weight: 1000;font-family: "\u5FAE\u8F6F\u96C5\u9ED1";color: rgb(240, 133, 25);',t='font-size: 12px;line-height: 1.5;font-family: "\u5FAE\u8F6F\u96C5\u9ED1";color: rgb(0, 138, 255);',i='font-size: 15px;line-height: 1.5;font-family: "\u5FAE\u8F6F\u96C5\u9ED1";font-style: italic;color: rgb(240, 133, 25);padding-bottom: 5px;',a='font-size: 12px;line-height: 1.5;font-family: "\u5FAE\u8F6F\u96C5\u9ED1";color: rgb(0, 138, 255);';console.log(n,e,t,i,a)};function Ht(r,n,e,t,i,a,o){try{var u=r[a](o),s=u.value}catch(c){e(c);return}u.done?n(s):Promise.resolve(s).then(t,i)}function G(r){return function(){var n=this,e=arguments;return new Promise(function(t,i){var a=r.apply(n,e);function o(s){Ht(a,t,i,o,u,"next",s)}function u(s){Ht(a,t,i,o,u,"throw",s)}o(void 0)})}}function ee(r){return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ee(r)}function Er(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ut={exports:{}},$t={exports:{}};(function(r){function n(e){return r.exports=n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r.exports.__esModule=!0,r.exports.default=r.exports,n(e)}r.exports=n,r.exports.__esModule=!0,r.exports.default=r.exports})($t),function(r){var n=$t.exports.default;function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */r.exports=e=function(){return t},r.exports.__esModule=!0,r.exports.default=r.exports;var t={},i=Object.prototype,a=i.hasOwnProperty,o=typeof Symbol=="function"?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function d(h,f,m){return Object.defineProperty(h,f,{value:m,enumerable:!0,configurable:!0,writable:!0}),h[f]}try{d({},"")}catch{d=function(m,w,C){return m[w]=C}}function l(h,f,m,w){var C=f&&f.prototype instanceof A?f:A,k=Object.create(C.prototype),H=new ne(w||[]);return k._invoke=function(re,ue,j){var z="suspendedStart";return function(se,Cr){if(z==="executing")throw new Error("Generator is already running");if(z==="completed"){if(se==="throw")throw Cr;return oe()}for(j.method=se,j.arg=Cr;;){var Or=j.delegate;if(Or){var Ft=Se(Or,j);if(Ft){if(Ft===b)continue;return Ft}}if(j.method==="next")j.sent=j._sent=j.arg;else if(j.method==="throw"){if(z==="suspendedStart")throw z="completed",j.arg;j.dispatchException(j.arg)}else j.method==="return"&&j.abrupt("return",j.arg);z="executing";var Le=g(re,ue,j);if(Le.type==="normal"){if(z=j.done?"completed":"suspendedYield",Le.arg===b)continue;return{value:Le.arg,done:j.done}}Le.type==="throw"&&(z="completed",j.method="throw",j.arg=Le.arg)}}}(h,m,H),k}function g(h,f,m){try{return{type:"normal",arg:h.call(f,m)}}catch(w){return{type:"throw",arg:w}}}t.wrap=l;var b={};function A(){}function R(){}function T(){}var K={};d(K,u,function(){return this});var M=Object.getPrototypeOf,X=M&&M(M(Y([])));X&&X!==i&&a.call(X,u)&&(K=X);var y=T.prototype=A.prototype=Object.create(K);function fe(h){["next","throw","return"].forEach(function(f){d(h,f,function(m){return this._invoke(f,m)})})}function te(h,f){function m(C,k,H,re){var ue=g(h[C],h,k);if(ue.type!=="throw"){var j=ue.arg,z=j.value;return z&&n(z)=="object"&&a.call(z,"__await")?f.resolve(z.__await).then(function(se){m("next",se,H,re)},function(se){m("throw",se,H,re)}):f.resolve(z).then(function(se){j.value=se,H(j)},function(se){return m("throw",se,H,re)})}re(ue.arg)}var w;this._invoke=function(C,k){function H(){return new f(function(re,ue){m(C,k,re,ue)})}return w=w?w.then(H,H):H()}}function Se(h,f){var m=h.iterator[f.method];if(m===void 0){if(f.delegate=null,f.method==="throw"){if(h.iterator.return&&(f.method="return",f.arg=void 0,Se(h,f),f.method==="throw"))return b;f.method="throw",f.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var w=g(m,h.iterator,f.arg);if(w.type==="throw")return f.method="throw",f.arg=w.arg,f.delegate=null,b;var C=w.arg;return C?C.done?(f[h.resultName]=C.value,f.next=h.nextLoc,f.method!=="return"&&(f.method="next",f.arg=void 0),f.delegate=null,b):C:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,b)}function Ge(h){var f={tryLoc:h[0]};1 in h&&(f.catchLoc=h[1]),2 in h&&(f.finallyLoc=h[2],f.afterLoc=h[3]),this.tryEntries.push(f)}function Ce(h){var f=h.completion||{};f.type="normal",delete f.arg,h.completion=f}function ne(h){this.tryEntries=[{tryLoc:"root"}],h.forEach(Ge,this),this.reset(!0)}function Y(h){if(h){var f=h[u];if(f)return f.call(h);if(typeof h.next=="function")return h;if(!isNaN(h.length)){var m=-1,w=function C(){for(;++m<h.length;)if(a.call(h,m))return C.value=h[m],C.done=!1,C;return C.value=void 0,C.done=!0,C};return w.next=w}}return{next:oe}}function oe(){return{value:void 0,done:!0}}return R.prototype=T,d(y,"constructor",T),d(T,"constructor",R),R.displayName=d(T,c,"GeneratorFunction"),t.isGeneratorFunction=function(h){var f=typeof h=="function"&&h.constructor;return!!f&&(f===R||(f.displayName||f.name)==="GeneratorFunction")},t.mark=function(h){return Object.setPrototypeOf?Object.setPrototypeOf(h,T):(h.__proto__=T,d(h,c,"GeneratorFunction")),h.prototype=Object.create(y),h},t.awrap=function(h){return{__await:h}},fe(te.prototype),d(te.prototype,s,function(){return this}),t.AsyncIterator=te,t.async=function(h,f,m,w,C){C===void 0&&(C=Promise);var k=new te(l(h,f,m,w),C);return t.isGeneratorFunction(f)?k:k.next().then(function(H){return H.done?H.value:k.next()})},fe(y),d(y,c,"Generator"),d(y,u,function(){return this}),d(y,"toString",function(){return"[object Generator]"}),t.keys=function(h){var f=[];for(var m in h)f.push(m);return f.reverse(),function w(){for(;f.length;){var C=f.pop();if(C in h)return w.value=C,w.done=!1,w}return w.done=!0,w}},t.values=Y,ne.prototype={constructor:ne,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Ce),!f)for(var m in this)m.charAt(0)==="t"&&a.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=void 0)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var m=this;function w(j,z){return H.type="throw",H.arg=f,m.next=j,z&&(m.method="next",m.arg=void 0),!!z}for(var C=this.tryEntries.length-1;C>=0;--C){var k=this.tryEntries[C],H=k.completion;if(k.tryLoc==="root")return w("end");if(k.tryLoc<=this.prev){var re=a.call(k,"catchLoc"),ue=a.call(k,"finallyLoc");if(re&&ue){if(this.prev<k.catchLoc)return w(k.catchLoc,!0);if(this.prev<k.finallyLoc)return w(k.finallyLoc)}else if(re){if(this.prev<k.catchLoc)return w(k.catchLoc,!0)}else{if(!ue)throw new Error("try statement without catch or finally");if(this.prev<k.finallyLoc)return w(k.finallyLoc)}}}},abrupt:function(f,m){for(var w=this.tryEntries.length-1;w>=0;--w){var C=this.tryEntries[w];if(C.tryLoc<=this.prev&&a.call(C,"finallyLoc")&&this.prev<C.finallyLoc){var k=C;break}}k&&(f==="break"||f==="continue")&&k.tryLoc<=m&&m<=k.finallyLoc&&(k=null);var H=k?k.completion:{};return H.type=f,H.arg=m,k?(this.method="next",this.next=k.finallyLoc,b):this.complete(H)},complete:function(f,m){if(f.type==="throw")throw f.arg;return f.type==="break"||f.type==="continue"?this.next=f.arg:f.type==="return"?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):f.type==="normal"&&m&&(this.next=m),b},finish:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var w=this.tryEntries[m];if(w.finallyLoc===f)return this.complete(w.completion,w.afterLoc),Ce(w),b}},catch:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var w=this.tryEntries[m];if(w.tryLoc===f){var C=w.completion;if(C.type==="throw"){var k=C.arg;Ce(w)}return k}}throw new Error("illegal catch attempt")},delegateYield:function(f,m,w){return this.delegate={iterator:Y(f),resultName:m,nextLoc:w},this.method==="next"&&(this.arg=void 0),b}},t}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(Ut);var Ie=Ut.exports(),_=Ie;try{regeneratorRuntime=Ie}catch{(typeof globalThis>"u"?"undefined":ee(globalThis))==="object"?globalThis.regeneratorRuntime=Ie:Function("r","regeneratorRuntime = r")(Ie)}function xt(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,e=arguments.length>2?arguments[2]:void 0,t,i,a=function(){var u=this,s=arguments;return e?(t?clearTimeout(t):i=r.apply(u,s),t=setTimeout(function(){t=null},n)):(clearTimeout(t),t=setTimeout(function(){r.apply(u,s)},n)),i};return a.cancel=function(){clearInterval(t),t=null},a}function Sr(r,n,e){var t,i,a,o=0;e=e||{leading:!1,trailing:!0};var u=function(){o=e.leading?+new Date:0,t=null,r.apply(i,a),t||(i=a=null)},s=function(){var d=+new Date;!o&&!e.leading&&(o=d),i=this,a=arguments;var l=n-(d-o);l<=0||l>n?(t&&(clearTimeout(t),t=null),o=d,r.apply(i,a),t||(i=a=null)):!t&&e.trailing&&(t=setTimeout(u,l))};return s.cancel=function(){clearTimeout(t),t=null,o=0},s}var Lr=function(){var n=document.documentElement,e=n.requestFullScreen||n.webkitRequestFullScreen||n.mozRequestFullScreen||n.msRequestFullscreen;if(e)e.call(n);else if(typeof window.ActiveXObject<"u"){var t=new ActiveXObject("WScript.Shell");t!=null&&t.SendKeys("{F11}")}},Ir=function(){var n=document,e=n.cancelFullScreen||n.mozCancelFullScreen||n.msExitFullscreen||n.webkitExitFullscreen||n.exitFullscreen;if(e)e.call(n);else if(typeof window.ActiveXObject<"u"){var t=new ActiveXObject("WScript.Shell");t!=null&&t.SendKeys("{F11}")}};function Ar(r){if(Array.isArray(r))return r}function Rr(r,n){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var t=[],i=!0,a=!1,o,u;try{for(e=e.call(r);!(i=(o=e.next()).done)&&(t.push(o.value),!(n&&t.length===n));i=!0);}catch(s){a=!0,u=s}finally{try{!i&&e.return!=null&&e.return()}finally{if(a)throw u}}return t}}function qe(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=r[e];return t}function Kt(r,n){if(!!r){if(typeof r=="string")return qe(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return qe(r,n)}}function Dr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gt(r,n){return Ar(r)||Rr(r,n)||Kt(r,n)||Dr()}function Br(r,n){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=jr(r))||n&&r&&typeof r.length=="number"){e&&(r=e);var t=0,i=function(){};return{s:i,n:function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,u;return{s:function(){e=e.call(r)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,u=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw u}}}}function jr(r,n){if(!!r){if(typeof r=="string")return qt(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return qt(r,n)}}function qt(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=r[e];return t}var Pr=function(){function r(){N(this,r),this.events=new Map}return V(r,[{key:"_add",value:function(e,t,i){var a=this,o=this.events.get(e),u=o||this.events.set(e,new Map).get(e);u.set(e,function(){t.apply(void 0,arguments),i&&a.off(e,t)})}},{key:"on",value:function(e,t){if(!t){console.error("No callback for key: ",e);return}this._add(e,t,!1)}},{key:"off",value:function(e,t){var i=this.events.get(e);i&&i.delete(t)}},{key:"dispatch",value:function(e){var t=this.events.get(e);if(!t){console.error("No callback for key: ",e);return}for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];var u=Br(t.entries()),s;try{for(u.s();!(s=u.n()).done;){var c=Gt(s.value,2),d=c[1];d.apply(void 0,a)}}catch(l){u.e(l)}finally{u.f()}}},{key:"once",value:function(e,t){this._add(e,t,!0)}}]),r}();const Nr=new Pr;function We(){this.locked=null}We.prototype.lock=G(_.mark(function r(){var n=this;return _.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.locked!==null){t.next=4;break}this.locked=[],t.next=6;break;case 4:return t.next=6,new Promise(function(i){return n.locked.push(i)});case 6:case"end":return t.stop()}},r,this)})),We.prototype.unlock=function(){this.locked.length?this.locked.shift()():this.locked=null};const Fr={captureVideo:function(n){var e=document.createElement("canvas");return e.width=n.videoWidth,e.height=n.videoHeight,e.getContext("2d").drawImage(n,0,0,e.width,e.height),e.toDataURL()}};var Tr=function(){var r=navigator.userAgent,n=/(?:Windows Phone)/.test(r),e=/(?:SymbianOS)/.test(r)||n,t=/(?:Android)/.test(r),i=/(?:Firefox)/.test(r);/(?:Chrome|CriOS)/.test(r);var a=/(?:iPad|PlayBook)/.test(r)||t&&!/(?:Mobile)/.test(r)||i&&/(?:Tablet)/.test(r),o=/(?:iPhone)/.test(r)&&!a,u=!o&&!t&&!e;return{isTablet:a,isPhone:o,isAndroid:t,isPc:u}}(),Wt={treeDfs:function(n,e){n.forEach(function(t){e(t),t.children&&Wt.treeDfs(t.children,e)})},treeToList:function(n){var e=[],t=function i(a){a.forEach(function(o){e.push(o),o.children&&o.children.length>0&&i(o.children)})};return t(n),e},list2Tree:function(n){return n.forEach(function(e){n.forEach(function(t){t.pid===e.id&&(e.children||(e.children=[]),e.children.push(t))})}),n=n.filter(function(e){return e.pid===null}),n}};function p(r,n,e){return n in r?Object.defineProperty(r,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[n]=e,r}var zt={exports:{}},ze={exports:{}},Yt=function(n,e){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return n.apply(e,i)}},Mr=Yt,de=Object.prototype.toString;function Ye(r){return Array.isArray(r)}function Je(r){return typeof r>"u"}function Vr(r){return r!==null&&!Je(r)&&r.constructor!==null&&!Je(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Jt(r){return de.call(r)==="[object ArrayBuffer]"}function Hr(r){return de.call(r)==="[object FormData]"}function Ur(r){var n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(r):n=r&&r.buffer&&Jt(r.buffer),n}function $r(r){return typeof r=="string"}function xr(r){return typeof r=="number"}function Xt(r){return r!==null&&ee(r)==="object"}function Ae(r){if(de.call(r)!=="[object Object]")return!1;var n=Object.getPrototypeOf(r);return n===null||n===Object.prototype}function Kr(r){return de.call(r)==="[object Date]"}function Gr(r){return de.call(r)==="[object File]"}function qr(r){return de.call(r)==="[object Blob]"}function Zt(r){return de.call(r)==="[object Function]"}function Wr(r){return Xt(r)&&Zt(r.pipe)}function zr(r){return de.call(r)==="[object URLSearchParams]"}function Yr(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Jr(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Xe(r,n){if(!(r===null||typeof r>"u"))if(ee(r)!=="object"&&(r=[r]),Ye(r))for(var e=0,t=r.length;e<t;e++)n.call(null,r[e],e,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&n.call(null,r[i],i,r)}function Ze(){var r={};function n(i,a){Ae(r[a])&&Ae(i)?r[a]=Ze(r[a],i):Ae(i)?r[a]=Ze({},i):Ye(i)?r[a]=i.slice():r[a]=i}for(var e=0,t=arguments.length;e<t;e++)Xe(arguments[e],n);return r}function Xr(r,n,e){return Xe(n,function(i,a){e&&typeof i=="function"?r[a]=Mr(i,e):r[a]=i}),r}function Zr(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}var J={isArray:Ye,isArrayBuffer:Jt,isBuffer:Vr,isFormData:Hr,isArrayBufferView:Ur,isString:$r,isNumber:xr,isObject:Xt,isPlainObject:Ae,isUndefined:Je,isDate:Kr,isFile:Gr,isBlob:qr,isFunction:Zt,isStream:Wr,isURLSearchParams:zr,isStandardBrowserEnv:Jr,forEach:Xe,merge:Ze,extend:Xr,trim:Yr,stripBOM:Zr},ge=J;function Qt(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var en=function(n,e,t){if(!e)return n;var i;if(t)i=t(e);else if(ge.isURLSearchParams(e))i=e.toString();else{var a=[];ge.forEach(e,function(s,c){s===null||typeof s>"u"||(ge.isArray(s)?c=c+"[]":s=[s],ge.forEach(s,function(l){ge.isDate(l)?l=l.toISOString():ge.isObject(l)&&(l=JSON.stringify(l)),a.push(Qt(c)+"="+Qt(l))}))}),i=a.join("&")}if(i){var o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+i}return n},Qr=J;function Re(){this.handlers=[]}Re.prototype.use=function(n,e,t){return this.handlers.push({fulfilled:n,rejected:e,synchronous:t?t.synchronous:!1,runWhen:t?t.runWhen:null}),this.handlers.length-1},Re.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},Re.prototype.forEach=function(n){Qr.forEach(this.handlers,function(t){t!==null&&n(t)})};var ei=Re,ti=J,ni=function(n,e){ti.forEach(n,function(i,a){a!==e&&a.toUpperCase()===e.toUpperCase()&&(n[e]=i,delete n[a])})},tn=function(n,e,t,i,a){return n.config=e,t&&(n.code=t),n.request=i,n.response=a,n.isAxiosError=!0,n.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},n},nn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Qe,rn;function an(){if(rn)return Qe;rn=1;var r=tn;return Qe=function(e,t,i,a,o){var u=new Error(e);return r(u,t,i,a,o)},Qe}var et,on;function ri(){if(on)return et;on=1;var r=an();return et=function(e,t,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?e(i):t(r("Request failed with status code "+i.status,i.config,null,i.request,i))},et}var tt,un;function ii(){if(un)return tt;un=1;var r=J;return tt=r.isStandardBrowserEnv()?function(){return{write:function(t,i,a,o,u,s){var c=[];c.push(t+"="+encodeURIComponent(i)),r.isNumber(a)&&c.push("expires="+new Date(a).toGMTString()),r.isString(o)&&c.push("path="+o),r.isString(u)&&c.push("domain="+u),s===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(t){var i=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),tt}var nt,sn;function ai(){return sn||(sn=1,nt=function(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}),nt}var rt,ln;function oi(){return ln||(ln=1,rt=function(n,e){return e?n.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):n}),rt}var it,cn;function ui(){if(cn)return it;cn=1;var r=ai(),n=oi();return it=function(t,i){return t&&!r(i)?n(t,i):i},it}var at,fn;function si(){if(fn)return at;fn=1;var r=J,n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return at=function(t){var i={},a,o,u;return t&&r.forEach(t.split(`
`),function(c){if(u=c.indexOf(":"),a=r.trim(c.substr(0,u)).toLowerCase(),o=r.trim(c.substr(u+1)),a){if(i[a]&&n.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},at}var ot,dn;function li(){if(dn)return ot;dn=1;var r=J;return ot=r.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),i;function a(o){var u=o;return e&&(t.setAttribute("href",u),u=t.href),t.setAttribute("href",u),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=a(window.location.href),function(u){var s=r.isString(u)?a(u):u;return s.protocol===i.protocol&&s.host===i.host}}():function(){return function(){return!0}}(),ot}var ut,vn;function De(){if(vn)return ut;vn=1;function r(n){this.message=n}return r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,ut=r,ut}var st,hn;function pn(){if(hn)return st;hn=1;var r=J,n=ri(),e=ii(),t=en,i=ui(),a=si(),o=li(),u=an(),s=nn,c=De();return st=function(l){return new Promise(function(b,A){var R=l.data,T=l.headers,K=l.responseType,M;function X(){l.cancelToken&&l.cancelToken.unsubscribe(M),l.signal&&l.signal.removeEventListener("abort",M)}r.isFormData(R)&&delete T["Content-Type"];var y=new XMLHttpRequest;if(l.auth){var fe=l.auth.username||"",te=l.auth.password?unescape(encodeURIComponent(l.auth.password)):"";T.Authorization="Basic "+btoa(fe+":"+te)}var Se=i(l.baseURL,l.url);y.open(l.method.toUpperCase(),t(Se,l.params,l.paramsSerializer),!0),y.timeout=l.timeout;function Ge(){if(!!y){var ne="getAllResponseHeaders"in y?a(y.getAllResponseHeaders()):null,Y=!K||K==="text"||K==="json"?y.responseText:y.response,oe={data:Y,status:y.status,statusText:y.statusText,headers:ne,config:l,request:y};n(function(f){b(f),X()},function(f){A(f),X()},oe),y=null}}if("onloadend"in y?y.onloadend=Ge:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(Ge)},y.onabort=function(){!y||(A(u("Request aborted",l,"ECONNABORTED",y)),y=null)},y.onerror=function(){A(u("Network Error",l,null,y)),y=null},y.ontimeout=function(){var Y=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded",oe=l.transitional||s;l.timeoutErrorMessage&&(Y=l.timeoutErrorMessage),A(u(Y,l,oe.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},r.isStandardBrowserEnv()){var Ce=(l.withCredentials||o(Se))&&l.xsrfCookieName?e.read(l.xsrfCookieName):void 0;Ce&&(T[l.xsrfHeaderName]=Ce)}"setRequestHeader"in y&&r.forEach(T,function(Y,oe){typeof R>"u"&&oe.toLowerCase()==="content-type"?delete T[oe]:y.setRequestHeader(oe,Y)}),r.isUndefined(l.withCredentials)||(y.withCredentials=!!l.withCredentials),K&&K!=="json"&&(y.responseType=l.responseType),typeof l.onDownloadProgress=="function"&&y.addEventListener("progress",l.onDownloadProgress),typeof l.onUploadProgress=="function"&&y.upload&&y.upload.addEventListener("progress",l.onUploadProgress),(l.cancelToken||l.signal)&&(M=function(Y){!y||(A(!Y||Y&&Y.type?new c("canceled"):Y),y.abort(),y=null)},l.cancelToken&&l.cancelToken.subscribe(M),l.signal&&(l.signal.aborted?M():l.signal.addEventListener("abort",M))),R||(R=null),y.send(R)})},st}var q=J,gn=ni,ci=tn,fi=nn,di={"Content-Type":"application/x-www-form-urlencoded"};function yn(r,n){!q.isUndefined(r)&&q.isUndefined(r["Content-Type"])&&(r["Content-Type"]=n)}function vi(){var r;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(r=pn()),r}function hi(r,n,e){if(q.isString(r))try{return(n||JSON.parse)(r),q.trim(r)}catch(t){if(t.name!=="SyntaxError")throw t}return(e||JSON.stringify)(r)}var Be={transitional:fi,adapter:vi(),transformRequest:[function(n,e){return gn(e,"Accept"),gn(e,"Content-Type"),q.isFormData(n)||q.isArrayBuffer(n)||q.isBuffer(n)||q.isStream(n)||q.isFile(n)||q.isBlob(n)?n:q.isArrayBufferView(n)?n.buffer:q.isURLSearchParams(n)?(yn(e,"application/x-www-form-urlencoded;charset=utf-8"),n.toString()):q.isObject(n)||e&&e["Content-Type"]==="application/json"?(yn(e,"application/json"),hi(n)):n}],transformResponse:[function(n){var e=this.transitional||Be.transitional,t=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,a=!t&&this.responseType==="json";if(a||i&&q.isString(n)&&n.length)try{return JSON.parse(n)}catch(o){if(a)throw o.name==="SyntaxError"?ci(o,this,"E_JSON_PARSE"):o}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};q.forEach(["delete","get","head"],function(n){Be.headers[n]={}}),q.forEach(["post","put","patch"],function(n){Be.headers[n]=q.merge(di)});var lt=Be,pi=J,gi=lt,yi=function(n,e,t){var i=this||gi;return pi.forEach(t,function(o){n=o.call(i,n,e)}),n},ct,mn;function bn(){return mn||(mn=1,ct=function(n){return!!(n&&n.__CANCEL__)}),ct}var wn=J,ft=yi,mi=bn(),bi=lt,wi=De();function dt(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new wi("canceled")}var Ci=function(n){dt(n),n.headers=n.headers||{},n.data=ft.call(n,n.data,n.headers,n.transformRequest),n.headers=wn.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),wn.forEach(["delete","get","head","post","put","patch","common"],function(i){delete n.headers[i]});var e=n.adapter||bi.adapter;return e(n).then(function(i){return dt(n),i.data=ft.call(n,i.data,i.headers,n.transformResponse),i},function(i){return mi(i)||(dt(n),i&&i.response&&(i.response.data=ft.call(n,i.response.data,i.response.headers,n.transformResponse))),Promise.reject(i)})},Z=J,Cn=function(n,e){e=e||{};var t={};function i(d,l){return Z.isPlainObject(d)&&Z.isPlainObject(l)?Z.merge(d,l):Z.isPlainObject(l)?Z.merge({},l):Z.isArray(l)?l.slice():l}function a(d){if(Z.isUndefined(e[d])){if(!Z.isUndefined(n[d]))return i(void 0,n[d])}else return i(n[d],e[d])}function o(d){if(!Z.isUndefined(e[d]))return i(void 0,e[d])}function u(d){if(Z.isUndefined(e[d])){if(!Z.isUndefined(n[d]))return i(void 0,n[d])}else return i(void 0,e[d])}function s(d){if(d in e)return i(n[d],e[d]);if(d in n)return i(void 0,n[d])}var c={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:s};return Z.forEach(Object.keys(n).concat(Object.keys(e)),function(l){var g=c[l]||a,b=g(l);Z.isUndefined(b)&&g!==s||(t[l]=b)}),t},vt,On;function kn(){return On||(On=1,vt={version:"0.26.1"}),vt}var Oi=kn().version,ht={};["object","boolean","number","function","string","symbol"].forEach(function(r,n){ht[r]=function(t){return ee(t)===r||"a"+(n<1?"n ":" ")+r}});var _n={};ht.transitional=function(n,e,t){function i(a,o){return"[Axios v"+Oi+"] Transitional option '"+a+"'"+o+(t?". "+t:"")}return function(a,o,u){if(n===!1)throw new Error(i(o," has been removed"+(e?" in "+e:"")));return e&&!_n[o]&&(_n[o]=!0,console.warn(i(o," has been deprecated since v"+e+" and will be removed in the near future"))),n?n(a,o,u):!0}};function ki(r,n,e){if(ee(r)!=="object")throw new TypeError("options must be an object");for(var t=Object.keys(r),i=t.length;i-- >0;){var a=t[i],o=n[a];if(o){var u=r[a],s=u===void 0||o(u,a,r);if(s!==!0)throw new TypeError("option "+a+" must be "+s);continue}if(e!==!0)throw Error("Unknown option "+a)}}var _i={assertOptions:ki,validators:ht},En=J,Ei=en,Sn=ei,Ln=Ci,je=Cn,In=_i,ye=In.validators;function Oe(r){this.defaults=r,this.interceptors={request:new Sn,response:new Sn}}Oe.prototype.request=function(n,e){typeof n=="string"?(e=e||{},e.url=n):e=n||{},e=je(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&In.assertOptions(t,{silentJSONParsing:ye.transitional(ye.boolean),forcedJSONParsing:ye.transitional(ye.boolean),clarifyTimeoutError:ye.transitional(ye.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(e)===!1||(a=a&&b.synchronous,i.unshift(b.fulfilled,b.rejected))});var o=[];this.interceptors.response.forEach(function(b){o.push(b.fulfilled,b.rejected)});var u;if(!a){var s=[Ln,void 0];for(Array.prototype.unshift.apply(s,i),s=s.concat(o),u=Promise.resolve(e);s.length;)u=u.then(s.shift(),s.shift());return u}for(var c=e;i.length;){var d=i.shift(),l=i.shift();try{c=d(c)}catch(g){l(g);break}}try{u=Ln(c)}catch(g){return Promise.reject(g)}for(;o.length;)u=u.then(o.shift(),o.shift());return u},Oe.prototype.getUri=function(n){return n=je(this.defaults,n),Ei(n.url,n.params,n.paramsSerializer).replace(/^\?/,"")},En.forEach(["delete","get","head","options"],function(n){Oe.prototype[n]=function(e,t){return this.request(je(t||{},{method:n,url:e,data:(t||{}).data}))}}),En.forEach(["post","put","patch"],function(n){Oe.prototype[n]=function(e,t,i){return this.request(je(i||{},{method:n,url:e,data:t}))}});var Si=Oe,pt,An;function Li(){if(An)return pt;An=1;var r=De();function n(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(o){t=o});var i=this;this.promise.then(function(a){if(!!i._listeners){var o,u=i._listeners.length;for(o=0;o<u;o++)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,u=new Promise(function(s){i.subscribe(s),o=s}).then(a);return u.cancel=function(){i.unsubscribe(o)},u},e(function(o){i.reason||(i.reason=new r(o),t(i.reason))})}return n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]},n.prototype.unsubscribe=function(t){if(!!this._listeners){var i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}},n.source=function(){var t,i=new n(function(o){t=o});return{token:i,cancel:t}},pt=n,pt}var gt,Rn;function Ii(){return Rn||(Rn=1,gt=function(n){return function(t){return n.apply(null,t)}}),gt}var yt,Dn;function Ai(){if(Dn)return yt;Dn=1;var r=J;return yt=function(e){return r.isObject(e)&&e.isAxiosError===!0},yt}var Bn=J,Ri=Yt,Pe=Si,Di=Cn,Bi=lt;function jn(r){var n=new Pe(r),e=Ri(Pe.prototype.request,n);return Bn.extend(e,Pe.prototype,n),Bn.extend(e,n),e.create=function(i){return jn(Di(r,i))},e}var ie=jn(Bi);ie.Axios=Pe,ie.Cancel=De(),ie.CancelToken=Li(),ie.isCancel=bn(),ie.VERSION=kn().version,ie.all=function(n){return Promise.all(n)},ie.spread=Ii(),ie.isAxiosError=Ai(),ze.exports=ie,ze.exports.default=ie,function(r){r.exports=ze.exports}(zt);const Pn=Er(zt.exports);function Nn(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,t)}return e}function Fn(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?Nn(Object(e),!0).forEach(function(t){p(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Nn(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}var mt=Pn.create({baseURL:"",timeout:1e4});mt.interceptors.request.use(function(r){return r},function(r){return Promise.reject(r)}),mt.interceptors.response.use(function(r){return r.data},function(r){return Promise.reject(r)});var ji=Pn.CancelToken;function Pi(){return ji.source()}function Ni(){return function(){var n=Pi();return{http:function(){var e=G(_.mark(function i(a){return _.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",mt.request(Fn(Fn({},a),{},{cancelToken:n.token})));case 1:case"end":return u.stop()}},i)}));function t(i){return e.apply(this,arguments)}return t}(),cancel:function(t){n.cancel(t)}}}}const Fi=Ni();function Tn(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,t)}return e}function Ti(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?Tn(Object(e),!0).forEach(function(t){p(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Tn(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}function Mi(){return bt.apply(this,arguments)}function bt(){return bt=G(_.mark(function r(){var n,e,t,i;return _.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=Fi(),e=n.http,o.next=3,e({url:"./config.json"});case 3:return t=o.sent,i=window.location.host,console.log("%c config.json\u914D\u7F6E:","color: red;font-size:13px",t),console.log("%c \u672C\u673AIP:","color: blue;font-size:13px",i),o.abrupt("return",Ti({environments:t.environments},t[t.environments||"PRD"])||{});case 8:case"end":return o.stop()}},r)})),bt.apply(this,arguments)}var Mn=Ct,Vn=Te,Vi={code:400,msg:"invalid parameter"},Hi={code:401,msg:"view3d uninitialized "};function Ne(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"error";Mn(r)&&console.error(r),Vn(r)&&console.log(r.msg)}function wt(r){Mn(r)&&console.warn(r),Vn(r)&&console.warn(r.msg)}function v(r,n){if(!!r)return!n in r?(Ne("".concat(n," dose not exist.")),!1):!0}const Ui=Object.freeze(Object.defineProperty({__proto__:null,InvalidParameter:Vi,View3dUnInitialized:Hi,logError:Ne,warn:wt,functionExist:v},Symbol.toStringTag,{value:"Module"}));var pe=function(){return null},$i=function(){return!1},Fe=Object.create(null),Hn=Object.prototype.toString,Un=function(n){return Hn.call(n)},Te=function(n){return Un(n)==="[object Object]"},$n=function(n){return Kn(n)&&ae(n.then)&&ae(n.catch)},xi=function(n){return n===!0||n===!1};function Ki(r){return r==null||r===""||r==="undefined"}function Gi(r){return!(r==null||r===""||r==="undefined")}function Me(r){return typeof Array.isArray=="export function"?Array.isArray(r):Object.prototype.toString.call(r)==="[object Array]"}function Ct(r){return typeof r=="string"&&r.constructor===String}function qi(r){return typeof obj=="number"&&obj.constructor===Number}function xn(r){return ee(r)==="object"&&r.constructor===Date}function ae(r){return typeof r=="export function"||typeof r=="function"}function Kn(r){return r!==null&&ee(r)=="object"}function Ot(r,n){if(r===null||ee(r)!="object")return r;if(n==null&&(n=["_parent","_class"]),xn(r)){var e=new Date;return e.setTime(r.getTime()),e}if(Me(r)){for(var e=[],t=0,i=r.length;t<i;++t)e[t]=Ot(r[t],n);return e}if(ee(r)==="object"){var e={};for(var a in r)typeof a!="export function"&&n.indexOf(a)==-1&&r.hasOwnProperty(a)&&(e[a]=Ot(r[a],n));return e}return r}function Wi(r){for(var n=document.scripts||document.getElementsByTagName("script"),e,t=n.length;t>0;t--)n[t-1].src.indexOf(r)>-1&&(e=n[t-1].src.substring(0,n[t-1].src.lastIndexOf("/")+1));return e}function Gn(r){return r&&Ct(r)&&r.toLowerCase()}function kt(r){return Object.keys(r).reduce(function(n,e){return n[Gn(e)]=r[e],n},{})}function zi(r){function n(e){return"_"+e.toLowerCase()}return Object.keys(r).reduce(function(e,t){return e[t.replace(/[A-Z]/,n)]=r[t],e},{})}function Yi(r){function n(e){return e=e.slice(1),e=e[0].toUpperCase()+e.slice(1),e}return Object.keys(r).reduce(function(e,t){return e[t.replace(/_\w/g,n)]=r[t],e},{})}var Ji=function(n,e){var t={};return n.forEach(function(i){var a=e(i);typeof a!="string"&&(a=JSON.stringify(a)),t[a]=t[a]||[],t[a].push(i)}),t},Xi=function(n){return n.sort(function(){return Math.random()-.5})};function le(){return Math.floor(Math.random()*16777215).toString(16)}function _t(){return"".concat(le()).concat(le()).concat(le().slice(2))}function Zi(){return"".concat(le()).concat(le()).concat(le()).concat(le()).concat(le().slice(2))}function Qi(r,n){var e=null,t="",i=0,a="    ";return n=n||{},n.newlineAfterColonIfBeforeBraceOrBracket=n.newlineAfterColonIfBeforeBraceOrBracket===!0,n.spaceAfterColon=n.spaceAfterColon===!1,typeof r!="string"||(r=JSON.parse(r)),r=JSON.stringify(r),e=/([{}])/g,r=r.replace(e,`\r
$1\r
`),e=/([\[\]])/g,r=r.replace(e,`\r
$1\r
`),e=/(\,)/g,r=r.replace(e,`$1\r
`),e=/(\r\n\r\n)/g,r=r.replace(e,`\r
`),e=/\r\n\,/g,r=r.replace(e,","),n.newlineAfterColonIfBeforeBraceOrBracket||(e=/\:\r\n\{/g,r=r.replace(e,":{"),e=/\:\r\n\[/g,r=r.replace(e,":[")),n.spaceAfterColon&&(e=/\:/g,r=r.replace(e,":")),r.split(`\r
`).forEach(function(o,u){var s=0,c=0,d="";for(o.match(/\{$/)||o.match(/\[$/)?c=1:o.match(/\}/)||o.match(/\]/)?i!==0&&(i-=1):c=0,s=0;s<i;s++)d+=a;o!==""&&(t+=d+o+`\r
`),i+=c}),t.replace(/\r\n$/,"")}var Et=1920,St=1080;function ea(r,n){Et=r,St=n}function ta(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return typeof r!="number"?r:"".concat(r/Et*100,"vw")}function na(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return typeof r!="number"?r:"".concat(r/St*100,"vh")}function ra(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Et;if(typeof r!="number")return r;var e=window.innerWidth;return Math.ceil(e/n*r)}function ia(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:St;if(typeof r!="number")return r;var e=window.innerHeight;return Math.ceil(e/n*r)}var qn=Tr,aa={sim_arraw:"sim_arraw",sim_dot:"sim_dot",sim_dashed:"sim_dashed",sim_flash:"sim_flash",sim_scan:"sim_scan",red:"red"};function oa(r,n){}function ua(r,n){if(!!r)return!n in r?(Ne("".concat(n," dose not exist.")),!1):!0}const sa=Object.freeze(Object.defineProperty({__proto__:null,lock:We,debounce:xt,throttle:Sr,enterFullScreen:Lr,exitFullScreen:Ir,captureUtil:Fr,EventBus:Nr,treeUtil:Wt,fetchConfig:Mi,NOOP:pe,FALSE_FUNC:$i,EMPTY_OBJ:Fe,objectToString:Hn,toTypeString:Un,isPlainObject:Te,isPromise:$n,isBoolean:xi,isEmpty:Ki,isNotEmpty:Gi,isArray:Me,isString:Ct,isNumber:qi,isDate:xn,isFunction:ae,isObject:Kn,clone:Ot,getPath:Wi,toLowerCase:Gn,objectKeyToLowerCase:kt,objectKeyToUnderline:zi,objectKeyUnderlineToUppercase:Yi,groupBy:Ji,shuffledArray:Xi,createHex:le,createUUID:_t,createUUID32:Zi,beautifyJSON:Qi,setBaseLayout:ea,formatPxToVw:ta,formatPxToVh:na,pxFromVw:ra,pxFromVh:ia,osUtil:qn,STYLES:aa,isInViewBox:oa,functionExist:ua},Symbol.toStringTag,{value:"Module"}));function la(r){if(Array.isArray(r))return qe(r)}function ca(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function fa(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lt(r){return la(r)||ca(r)||Kt(r)||fa()}var da=pe,Wn=Me,ce=ae,va=Te,ha=$n,ke=[],It=!1;function zn(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,n=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0,t=arguments.length,i=new Array(t>3?t-3:0),a=3;a<t;a++)i[a-3]=arguments[a];return new Promise(function(o){ce(n)&&(e=n,n=null),e&&e.apply(n,[].concat(i)),setTimeout(function(){var u=da;i.length===1&&ce(i[0])?u=i[0]:i.length>1&&ce(i[i.length-1])&&(u=i[i.length-1]),u(),o()},r)})}function Yn(r,n){for(var e=arguments.length,t=new Array(e>2?e-2:0),i=2;i<e;i++)t[i-2]=arguments[i];return new Promise(function(a){if(ce(n)){var o=function(){a.apply(void 0,arguments)};if(Wn(t)&&t.length===1&&ce(t[0])){var u=t[0];o=function(){for(var d=arguments.length,l=new Array(d),g=0;g<d;g++)l[g]=arguments[g];u.apply(r,[].concat(l)),a.apply(void 0,l)},t=[]}else if(Wn(t)&&t.length>1&&ce(t[t.length-1])){var s=t.pop();o=function(){for(var d=arguments.length,l=new Array(d),g=0;g<d;g++)l[g]=arguments[g];s.apply(null,[].concat(l)),a.apply(void 0,l)}}n.apply(r,[].concat(Lt(t),[o]))}})}function Ve(r,n){for(var e=arguments.length,t=new Array(e>2?e-2:0),i=2;i<e;i++)t[i-2]=arguments[i];return G(_.mark(function a(){return _.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Yn.apply(void 0,[r,n].concat(t)));case 1:case"end":return u.stop()}},a)}))}function Jn(r,n,e){for(var t=arguments.length,i=new Array(t>3?t-3:0),a=3;a<t;a++)i[a-3]=arguments[a];return G(_.mark(function o(){return _.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",zn.apply(void 0,[r,n,e].concat(i)));case 1:case"end":return s.stop()}},o)}))}function _e(r){return new Promise(function(){var n=G(_.mark(function e(t,i){return _.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:try{Xn({task:r.task,complete:function(){t.apply(void 0,arguments)}})}catch(u){i(u)}case 1:case"end":return o.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}())}function pa(r){return function(){var n=G(_.mark(function e(t,i){var a,o,u,s=arguments;return _.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:for(a=s.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=s[u];return d.abrupt("return",_e({task:function(){return ce(r)&&r&&r(),Ve.apply(void 0,[t,i].concat(o))}}));case 2:case"end":return d.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}()}function U(r,n){for(var e=arguments.length,t=new Array(e>2?e-2:0),i=2;i<e;i++)t[i-2]=arguments[i];return _e({task:Ve.apply(void 0,[r,n].concat(t))})}function S(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,n=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0,t=arguments.length,i=new Array(t>3?t-3:0),a=3;a<t;a++)i[a-3]=arguments[a];return _e({task:Jn.apply(void 0,[r,n,e].concat(i))})}function Xn(r){va(r)&&Zn(ke,r),!It&&ga()}function At(r){return r.length===0?null:r[0]}function Zn(r,n){r.push(n)}function Qn(r){return r.length===0?null:r.splice(0,1)}function ga(){return Rt.apply(this,arguments)}function Rt(){return Rt=G(_.mark(function r(){var n,e,t,i;return _.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:It=!0,n=At(ke);case 2:if(n===null){o.next=21;break}if(e=n.task(),t=void 0,!ce(e)){o.next=11;break}return o.next=8,e();case 8:t=o.sent,o.next=15;break;case 11:if(!ha(e)){o.next=15;break}return o.next=14,e;case 14:t=o.sent;case 15:i=n.complete,ce(i)&&i(t),Qn(ke),n=At(ke),o.next=2;break;case 21:It=!1;case 22:case"end":return o.stop()}},r)})),Rt.apply(this,arguments)}window.$taskQueue=ke;const er=Object.freeze(Object.defineProperty({__proto__:null,sleep:zn,until:Yn,curry:Ve,wait:Jn,doSchedule:_e,preSchedule:pa,schedule:U,waitSchedule:S,performAsyncWork:Xn,peek:At,push:Zn,pop:Qn},Symbol.toStringTag,{value:"Module"}));var ya=ae,ma=Fe,ba=xt,wa=function(){function r(){N(this,r),this._view3d=null,this.config=ma}return V(r,[{key:"view3d",get:function(){return this._view3d},set:function(e){this._view3d=e}},{key:"createMap",value:function(){var n=G(_.mark(function t(i){var a=this,o,u;return _.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.config=i,o={},u=this,!(!window.MapVision||!window.MapVision.View3d)){c.next=6;break}return i.error&&ya(i.error)&&i.error({code:1,msg:"mapvision3d.min.js file was not include."}),c.abrupt("return");case 6:return c.abrupt("return",_e({task:function(){var l={id:i.id,url:i.url,projectId:i.projectId,mapkey:i.mapkey,token:i.token};return o=new MapVision.View3d(l),Ve(o,o.Open,function(g){if(g.code===200)u._view3d=o;else{Ne({msg:"connection fail! check if MapVisionPServer is running!"}),i.error(g);return}i.autoResize&&Ca(u,i.autoResizeTicker),a._view3d.OverLayerRemoveAll(),i.resetBuildings&&a._view3d.ResetAllBuildings(),a.setNorthControl(i.northControl),i.defaultSetResolution&&a.setResolution(i.id),a.setParameters(),a.setMouseEnable(i.enableMouse),a.setKeyBoardEnable(i.enableKeyboard),a._view3d.Stop(),a._view3d.Clear(),a.setMouseCursorVisible(i.internalMouseVisible),a._insertMask(),i.defaultLocate&&o.ResetHome()})}}));case 7:case"end":return c.stop()}},t,this)}));function e(t){return n.apply(this,arguments)}return e}()},{key:"destroy",value:function(){Oa(),this.view3d=null}},{key:"_insertMask",value:function(){var e=this.config.id,t=document.getElementById(e);if(t){var i=t.parentNode;if(i){var a=document.createElement("div");a.id=e+"_mask",a.style.position="absolute",a.style.left="0",a.style.top="0",a.style.width="100%",a.style.height="100%",a.style.zIndex="1",a.style.display="none",a.style.backgroundColor="transparent",a.style.opacity="0",i.appendChild(a)}}}},{key:"_removeMask",value:function(){var e=this.config.id,t=document.getElementById(e);if(t){var i=t.parentNode;i&&i.removeChild(t)}}},{key:"showCover",value:function(){var e=this.config.id,t=document.getElementById(e+"_mask");t&&(t.style.display="block")}},{key:"hideCover",value:function(){var e=this.config.id,t=document.getElementById(e+"_mask");t&&(t.style.display="none")}},{key:"setResolution",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"mapVision3d",t=this.config,i=this._view3d,a=document.getElementById(e);if(a&&v(i,"SetResolution")){var o=window.devicePixelRatio*(qn.isPc?1:3);i.SetResolution(a.clientWidth*o*t.resolutionScale,a.clientHeight*o*t.resolutionScale)}}},{key:"openMap",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";v(this._view3d,"OpenMap")&&this._view3d.OpenMap(e)}},{key:"setMouseEnable",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._view3d.enableMouse=e}},{key:"setKeyBoardEnable",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._view3d.enableKeyboard=e}},{key:"setTreeVisible",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=this._view3d;if(v(t,"UpdateObjectVisible"))return S(10,t,t.UpdateObjectVisible,"InstancedFoliageActor",e)}},{key:"setDirectionalLightVisible",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=this._view3d;if(v(t,"UpdateObjectVisible"))return S(10,t,t.UpdateObjectVisible,"DirectionalLight",e)}},{key:"setDynamicSkyVisible",value:function(e){var t=this._view3d;if(v(t,"UpdateObjectVisible"))return S(10,t,t.UpdateObjectVisible,"Ultra_Dynamic_Sky",e)}},{key:"setSkySphereVisible",value:function(e){var t=this._view3d;if(v(t,"UpdateObjectVisible"))return S(10,t,t.UpdateObjectVisible,"BP_Sky_Sphere",e)}},{key:"getKeyBoardEnable",value:function(){return this._view3d.enableKeyboard}},{key:"setMouseCursorVisible",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;v(this._view3d,"SetParameters")&&this.setParameters({showmouse:e})}},{key:"getSceneSunInfo",value:function(){var n=G(_.mark(function t(){var i;return _.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(i=this._view3d,!v(i,"GetScenceSunInfo")){o.next=3;break}return o.abrupt("return",U(i,i.GetScenceSunInfo));case 3:case"end":return o.stop()}},t,this)}));function e(){return n.apply(this,arguments)}return e}()},{key:"setSceneSunInfo",value:function(e){var t=this._view3d;if(v(t,"SetScenceSunInfo"))return S(10,t,t.SetScenceSunInfo,e)}},{key:"setNorthControl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;this._view3d.SetNorthControl(e,t,i,a)}},{key:"close",value:function(){var e=this._view3d;v(e,"Close")&&(e.Close(),this.destroy())}},{key:"setParameters",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this._view3d;t.SetParameters(e)}},{key:"clear",value:function(){var e=this._view3d;v(e,"Clear")&&e.Clear()}},{key:"stop",value:function(){var e=this._view3d;v(e,"Stop")&&e.Stop()}},{key:"isClose",value:function(){var e=this._view3d;if(v(e,"IsClose"))return e.IsClose()}},{key:"setMapStatus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=this._view3d;v(t,"SetMapStatus")&&t.SetMapStatus(e)}}]),r}(),He;function Ca(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:300;He=ba(function(){r.setResolution(r.config.id)},n),window.addEventListener("resize",He)}function Oa(){He&&window.removeEventListener("resize",He)}function tr(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,t)}return e}function ve(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?tr(Object(e),!0).forEach(function(t){p(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):tr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}var Dt=Te,ka=ae,Ue=pe,_a=function(){function r(n,e){N(this,r),this.view3d=n,this.viewer=e,this.duration=1,this.timer=null}return V(r,[{key:"init",value:function(){this.resetHome()}},{key:"resetHome",value:function(){var e=this.view3d;v(e,"ResetHome")&&e.ResetHome()}},{key:"setPosition",value:function(e){var t=this.view3d;Dt(e)&&v(t,"SetPosition")&&t.SetPosition(e)}},{key:"flyToPosition",value:function(e){var t,i,a,o,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.duration,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Ue,l=this.view3d;(t=this.viewer)===null||t===void 0||(i=t.core)===null||i===void 0||i.showCover(),(a=this.viewer)===null||a===void 0||(o=a.event)===null||o===void 0||o.silent();var g=this;this.timer&&clearTimeout(this.timer);var b=function(M){var X,y,fe,te;(X=g.viewer)===null||X===void 0||(y=X.core)===null||y===void 0||y.hideCover(),(fe=g.viewer)===null||fe===void 0||(te=fe.event)===null||te===void 0||te.reBind(),ka(d)&&setTimeout(function(){d(M)},100)};if(!e){b();return}if(Dt(e))v(l,"FlyToPosition")&&(l.FlyToPosition(e,u,s,c,function(K){g.timer&&(clearTimeout(g.timer),g.timer=null),b(K)}),this.timer=setTimeout(function(){b(null)},(s+.5)*1e3));else if(Array.isArray(e)){var A=0,R=null,T=function K(){var M=e[A],X=M.duration||s,y=function(te){R&&clearTimeout(R),A++,A===e.length?(R=null,b(te)):K()};l.FlyToPosition(M,u,X,c,y),R=setTimeout(y,(X+.2)*1e3)};T()}}},{key:"flyToPositionByOptions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={position:null,duration:1,enableCurve:!1,showLocation:!1,onFinish:Ue},i=Object.assign({},t,e);this.flyToPosition(i.position,i.showLocation,i.duration,i.enableCurve,i.onFinish)}},{key:"flyToObject",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.duration,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=this.view3d;Dt(e)&&!!e.gid&&v(a,"FlyToObject")&&a.FlyToObject(e,i,t)}},{key:"flyToObjectById",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={gid:"",showLocation:!1,pitch:90,yaw:0,distance:null,duration:this.duration,enableCurve:!1,onFinish:function(){return null}};if(e=ve(ve({},t),e),!e.gid){console.warn("object gid is undefined or ''.");return}var i=this.view3d;v(i,"FlyToObjectById")&&i.FlyToObjectById(e.gid,e.showLocation,e.pitch,e.distance,e.duration)}},{key:"setNorth",value:function(){var e=this.view3d;v(e,"SetNorth")&&e.SetNorth()}},{key:"getHomePosition",value:function(){var e=this.view3d;if(v(e,"GetHomePosition"))return U(e,e.GetHomePosition)}},{key:"getCurrentPosition",value:function(){var e=this.view3d;if(v(e,"GetCurrentPosition"))return U(e,e.GetCurrentPosition)}},{key:"getScreenPosition",value:function(e){var t=this.view3d;if(v(t,"GetScreenPosition"))return U(t,t.GetScrrenPosition,e)}},{key:"flyToObjectByType",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={type:10102,pitch:90,yaw:0,distance:100,duration:this.duration,heightRadio:1,enableCurve:!1,onFinish:Ue};e=ve(ve({},t),e);var i=this.view3d;if(v(i,"FlyToObjectByType"))return S.apply(void 0,[10,i,i.FlyToObjectByType].concat(Lt(e)))}},{key:"flyToObjectByIds",value:function(e){var t={ids:[],pitch:90,yaw:0,distance:100,duration:this.duration,heightRadio:1,enableCurve:!1,onFinish:Ue};e=ve(ve({},t),e);var i=this.view3d;if(v(i,"FlyToObjectByIds"))return S.apply(void 0,[10,i,i.FlyToObjectByIds].concat(Lt(e)))}},{key:"zoomIn",value:function(){var n=G(_.mark(function t(){var i;return _.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(i=this.view3d,!v(i,"ZoomIn")){o.next=3;break}return o.abrupt("return",S(10,i,i.ZoomIn));case 3:case"end":return o.stop()}},t,this)}));function e(){return n.apply(this,arguments)}return e}()},{key:"zoomOut",value:function(){var n=G(_.mark(function t(){var i;return _.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(i=this.view3d,!v(i,"ZoomOut")){o.next=3;break}return o.abrupt("return",S(10,i,i.ZoomOut));case 3:case"end":return o.stop()}},t,this)}));function e(){return n.apply(this,arguments)}return e}()},{key:"setPitchAngle",value:function(){var n=G(_.mark(function t(i){var a;return _.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=this.view3d,!v(a,"SetPitchAngle")){u.next=3;break}return u.abrupt("return",S(100,a,a.SetPitchAngle,i));case 3:case"end":return u.stop()}},t,this)}));function e(t){return n.apply(this,arguments)}return e}()},{key:"getPitchAngle",value:function(){var n=G(_.mark(function t(i){var a;return _.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=this.view3d,!v(a,"GetPitchAngle")){u.next=3;break}return u.abrupt("return",U(a,a.GetPitchAngle));case 3:case"end":return u.stop()}},t,this)}));function e(t){return n.apply(this,arguments)}return e}()},{key:"setRotateAngle",value:function(){var n=G(_.mark(function t(i){var a;return _.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=this.view3d,!v(a,"SetRotateAngle")){u.next=3;break}return u.abrupt("return",S(100,a,a.SetRotateAngle,i));case 3:case"end":return u.stop()}},t,this)}));function e(t){return n.apply(this,arguments)}return e}()},{key:"getRotateAngle",value:function(){var n=G(_.mark(function t(i){var a;return _.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a=this.view3d,!v(a,"GetRotateAngle")){u.next=3;break}return u.abrupt("return",U(a,a.GetRotateAngle));case 3:case"end":return u.stop()}},t,this)}));function e(t){return n.apply(this,arguments)}return e}()},{key:"rotate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={gid:"",pitch:90,radio:1,distance:10,highlight:!0};e=ve(ve({},t),e);var i=this.view3d;v(i,"Rotate")&&i.Rotate(e.pitch,e.radio,e.distance,e.gid,e.highlight)}}]),r}();function nr(r,n){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=Ea(r))||n&&r&&typeof r.length=="number"){e&&(r=e);var t=0,i=function(){};return{s:i,n:function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,u;return{s:function(){e=e.call(r)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,u=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw u}}}}function Ea(r,n){if(!!r){if(typeof r=="string")return rr(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return rr(r,n)}}function rr(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=r[e];return t}var Sa=Me,ir=ae,F=pe,La=function(){function r(n,e){N(this,r),this._view3d=n,this._drawCtl=e,this.config=e.config,this.mapViewer=e._mapView}return V(r,[{key:"_draw",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{isOnce:!1,onDraw:F,onFinish:F,drawPoints:!0,pointsVisible:!0},i=this.mapViewer,a=t.onDraw,o=t.onFinish,u=t.drawPoints;t.pointsVisible;var s=t.isOnce,c=this,d=null,l=[];i.event.silent();var g=this._drawCtl,b=function A(){if(g.overLayerStopEdit(),window.removeEventListener("contextmenu",A),u){var R=nr(l),T;try{for(R.s();!(T=R.n()).done;){var K=T.value;g.overLayerRemoveObject(K)}}catch(M){R.e(M)}finally{R.f()}}i.event.reBind(),ir(o)&&o(d)};window.addEventListener("contextmenu",b),g.overLayerStartEdit(e,function(A){if(d=A,Sa(A.points)&&u){var R=nr(A.points.slice(l.length)),T;try{for(R.s();!(T=R.n()).done;){var K=T.value;c.point({radius:5,color:e.color,location:K},!1).then(function(M){l.push(M)})}}catch(M){R.e(M)}finally{R.f()}}ir(a)&&a(A),s&&b()})}},{key:"text",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this._drawCtl,a=this.config.text(e);return i.overLayerCreateObject(a,t)}},{key:"drawText",value:function(e){var t=this.config.text(e),i={isOnce:!0,onFinish:e.onFinish||F};this._draw(t,i)}},{key:"model",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this._drawCtl;return i.overLayerCreateObject(this.config.model(e),t)}},{key:"drawModel",value:function(e){var t=this.config.model(e),i={isOnce:!0,onFinish:e.onFinish||F};this._draw(t,i)}},{key:"image",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this._drawCtl;return i.overLayerCreateObject(this.config.image(e),t)}},{key:"drawImage",value:function(e){var t=this.config.image(e),i={isOnce:!0,onFinish:e.onFinish||F};this._draw(t,i)}},{key:"point",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.circle(this.config.point(e),t)}},{key:"drawPoint",value:function(e){var t=this.config.point(e),i={isOnce:!0,onFinish:e.onFinish||F};this._draw(t,i)}},{key:"line",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!e.points||e.points.length<2)&&wt("\u521B\u5EFA\u7EBF\uFF0C\u5FC5\u987B\u63D0\u4F9B points \u53C2\u6570\uFF0C\u4E14\u81F3\u5C11\u5305\u542B\u4E24\u4E2A\u53CA\u4EE5\u4E0A\u4E2A\u70B9\uFF01"),this._drawCtl.overLayerCreateObject(this.config.line(e),t)}},{key:"drawLine",value:function(e){var t=this.config.line(e),i={isOnce:!1,onDraw:e.onDraw||F,onFinish:e.onFinish||F,drawPoints:e.drawPoints||!1,pointsVisible:e.pointsVisible||!1};this._draw(t,i)}},{key:"polygon",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.polygon(e),t)}},{key:"drawPolygon",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.config.polygon(e),i={onDraw:e.onDraw||F,onFinish:e.onFinish||F,drawPoints:e.drawPoints||!0,pointsVisible:e.pointsVisible||!0};this._draw(t,i)}},{key:"circle",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.circle(e),t)}},{key:"imageLabel",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.imageLabel(e),t)}},{key:"drawImageLabel",value:function(e){var t=this.config.imageLabel(e),i={isOnce:!0,onFinish:e.onFinish||F};this._draw(t,i)}},{key:"polygon3d",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.polygon3d(e),t)}},{key:"drawPolygon3d",value:function(e){var t=this.config.polygon3d(e),i={onFinish:e.onFinish||F};this._draw(t,i)}},{key:"triangle",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.triangle(e),t)}},{key:"drawTriangle",value:function(e){var t=this.config.triangle(e),i={onFinish:e.onFinish||F};this._draw(t,i)}},{key:"rect",value:function(e,t){return this._drawCtl.overLayerCreateObject(this.config.rect(e),t)}},{key:"drawRect",value:function(e){var t=this.config.rect(e),i={onFinish:e.onFinish||F};this._draw(t,i)}},{key:"regularPolygon",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.regularPolygon(e),t)}},{key:"drawRegularPolygon",value:function(e){var t=this.config.regularPolygon(e),i={onFinish:e.onFinish||F};this._draw(t,i)}},{key:"shape",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.shape(e),t)}},{key:"drawShape",value:function(e){var t=this.config.shape(e),i={onFinish:e.onFinish||F};this._draw(t,i)}},{key:"box",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.box(e),t)}},{key:"drawBox",value:function(e){var t=this.config.box(e),i={onFinish:e.onFinish||F};this._draw(t,i)}},{key:"pyramid",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.pyramid(e),t)}},{key:"drawPyramid",value:function(e){var t=this.config.pyramid(e),i={onFinish:e.onFinish||F};this._draw(t,i)}},{key:"cone",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.cone(e),t)}},{key:"drawCone",value:function(e){var t=this.config.cone(e),i={onFinish:e.onFinish||F};this._draw(t,i)}},{key:"cylinder",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.cylinder(e),t)}},{key:"drawCylinder",value:function(e){var t=this.config.cylinder(e),i={onFinish:e.onFinish||F};this._draw(t,i)}},{key:"sphere",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.sphere,t)}},{key:"drawSphere",value:function(e){var t=this.config.sphere(e),i={onFinish:e.onFinish||F};this._draw(t,i)}},{key:"skeleton",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.skeleton,t)}},{key:"billBoard",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.billBoard(e),t)}},{key:"vlcMedia",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.vlcMedia(e),t)}},{key:"routeModel",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._drawCtl.overLayerCreateObject(this.config.routeModel(e),t)}},{key:"layer",value:function(e){return this._drawCtl.layerLoadAsync(this.config.layer(e))}},{key:"layerDynamic",value:function(e){return this._drawCtl.layerLoadAsync(this.config.layerDynamic(e))}},{key:"route",value:function(e){return this._drawCtl.createRoute(this.config.route(e))}}]),r}(),Ia=function(){function r(n,e){N(this,r),this._view3d=n,this._drawCtl=e}return V(r,[{key:"one",value:function(e){return this._drawCtl.findObjectById(e)}},{key:"all",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"*";return this._drawCtl.findObjectByPrefix(e)}}]),r}(),Aa=V(function r(n){N(this,r),this._view3d=n}),Ra=function(){function r(n,e){N(this,r),this._view3d=n,this._drawCtl=e}return V(r,[{key:"all",value:function(){this._drawCtl.overLayerRemoveAll()}},{key:"one",value:function(e){this._drawCtl.overLayerRemoveObject(e)}},{key:"oneById",value:function(e){return this._drawCtl.overLayerRemoveObjectById(e)}}]),r}(),Da=V(function r(){N(this,r),this.LINE={SIM_ARRAW:"sim_arraw",SIM_DOT:"sim_dot",SIM_DASHED:"sim_dashed",SIM_FLASH:"sim_flash",SIM_CAN:"sim_scan"}});const Ba=new Da;var ar="10001",ja="10001_01",Pa="10001_02",Na="10001_03",Fa="10001_05",Bt="10002",Ta="10002_01",Ma="10003",Va="10004",Ha="10004_01",Ua="10004_02",$a="10005",xa="10006",Ka="10007",Ga="10008",qa="10009",Wa="10010",za="10010_01",Ya="10012",Ja="10013",Xa="10014",or={text:{type:10002,typeName:"label"},model:{type:10002,typeName:"model"},image:{type:10102,typeName:"image"},point:{type:10002,typeName:"circle"},line:{type:10002,typeName:"linestring"},polygon:{type:10002,typeName:"polygon"},circle:{type:10002,typeName:"circle"},imageLabel:{type:10002,typeName:"imageLabel"},polygon3d:{type:10002,typeName:"polygon3d"},triangle:{type:10002,typeName:"triangle"},rect:{type:10002,typeName:"rect"},regularPolygon:{type:10002,typeName:"regularPolygon"},shape:{type:10002,typeName:"shape"},box:{type:10002,typeName:"box"},pyramid:{type:10002,typeName:"pyramid"},cone:{type:10002,typeName:"cone"},cylinder:{type:10002,typeName:"cylinder"},sphere:{type:10002,typeName:"sphere"},skeleton:{type:10002,typeName:"skeleton"},billBoard:{type:10002,typeName:"webbrowser"},media:{type:10002,typeName:"media"},dynamicModel:{type:10002,typeName:"dynamicModel"},routeModel:{type:10002,typeName:"routeModel"},layer:{type:10002,typeName:"MLT_LAYER_SHAPE"},layerDynamic:{type:10002,typeName:"MLT_LAYER_POS_DYNAMIC"},route:{type:10002,typeName:"route_patrol"},videoSequence:{type:10002,typeName:"video_sequence"},video:{type:10002,typeName:"video_rtsp"},videoProjection:{type:10002,typeName:"media2"},region:{type:10002,typeName:"region"},heatmap:{type:10002,typeName:"heatmap_rect"}};const Za=Object.freeze(Object.defineProperty({__proto__:null,CATEGORY_CAMERA:ar,CAMERA_TYPE_BOX:ja,CAMERA_TYPE_SPEED_DOME:Pa,CAMERA_TYPE_DOME:Na,CATEGORY_BAYONET:Fa,CATEGORY_DOOR:Bt,CATEGORY_DOOR_HK_FACE_ACCESS_TERMINAL:Ta,CATEGORY_FIRE_EXTINGUISHING:Ma,CATEGORY_INTERCOM:Va,CATEGORY_INTERCOM_HK_INDOOR:Ha,CATEGORY_INTERCOM_HK_OUTDOOR:Ua,CATEGORY_BROADCAST:$a,CATEGORY_ALARM:xa,CATEGORY_LIGAN:Ka,CATEGORY_WINDOW:Ga,CATEGORY_BED:qa,CATEGORY_FACE:Wa,CATEGORY_FACE_HK_400:za,CATEGORY_AGV:Ya,CATEGORY_CAR:Ja,CATEGORY_ROBOT:Xa,TYPE:or},Symbol.toStringTag,{value:"Module"}));function ur(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,t)}return e}function E(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ur(Object(e),!0).forEach(function(t){p(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ur(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}var L=or,I=kt,Qa=function(){function r(){N(this,r)}return V(r,[{key:"getTypeName",value:function(e){return e.typeName}},{key:"mergeConfig",value:function(e){return e.id||(e.id=_t()),e.gid||(e.gid=e.id),E(E({},e),{},{attr:E(E({},e.attr),{},{gid:e.gid||e.id})})}},{key:"text",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.text),text:"",font:"\u9ED1\u4F53",fontcolor:"#ffffff",fontsize:24,halign:"center",valign:"bottom",location:null},I(e)))}},{key:"model",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.model),filename:"default",scale:1,style:"red",location:null},I(e)))}},{key:"image",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.image),style:"default",scale:1,screen:!0,location:null},I(e)))}},{key:"point",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.point),radius:10,color:"red",location:null},I(e)))}},{key:"line",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.line),style:"red",linewidth:10,points:[]},I(e)))}},{key:"polygon",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.polygon),points:[],color:"#00ff00",linecolor:"#00ff00",lineWidth:1,linevisible:!0},I(e)))}},{key:"circle",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.circle),radius:10,color:"red",location:null},I(e)))}},{key:"imageLabel",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.imageLabel),lighting:!0,iconstyle:"default.png",style:"white",scale:1,screen:!0,location:null},I(e)))}},{key:"polygon3d",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.polygon3d),style:"green",color:"#0000ff",linewidth:5,linestyle:"green",linecolor:"#0000ff",linevisible:!0,roofvisible:!1,roofheight:400,edgestyle:"green",edgecolor:"#0000ff",edgeheight:400,points:[]},I(e)))}},{key:"triangle",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.triangle),color:"#ffffff",points:[]},I(e)))}},{key:"rect",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.rect),length:100,width:100,color:"#ffffff",location:null},I(e)))}},{key:"regularPolygon",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.regularPolygon),radius:100,num:5,color:"#ffffff",location:null},I(e)))}},{key:"shape",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.shape),scale:1,style:"box",color:"#ffffff",location:null},I(e)))}},{key:"box",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.box),length:100,width:100,height:100,color:"#ffffff",location:null},I(e)))}},{key:"pyramid",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.pyramid),radius:100,height:100,color:"#ffffff",location:null},I(e)))}},{key:"cone",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.cone),radius:100,height:100,color:"#ffffff",location:null},I(e)))}},{key:"cylinder",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.cylinder),radius:100,height:100,color:"#ffffff",location:null},I(e)))}},{key:"sphere",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.sphere),scale:1,radius:100,color:"#ffffff",location:null},I(e)))}},{key:"skeleton",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.skeleton),filename:"person",scale:1,color:"#ffffff",location:null},I(e)))}},{key:"billBoard",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.billBoard),url:"",width:100,height:100,screen:!0,location:null},I(e)))}},{key:"media",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.media),url:"",screen:!0,scale:1,width:100,height:100,location:null},I(e)))}},{key:"dynamicModel",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.dynamicModel),scale:1,filename:"",location:null},I(e)))}},{key:"routeModel",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.routeModel),scale:1,speed:20,filename:"default",points:[],location:null},I(e)))}},{key:"layer",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.layer),shapes:[]},I(e)))}},{key:"layerDynamic",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.layerDynamic),speed:10,shapes:[]},I(e)))}},{key:"route",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.route),visible:!0,style:"sim_arraw",showloc:!0,width:100,speed:2e3,distance:1e3,pitch:35,iselev:!0,geom:[]},I(e)))}},{key:"videoSequence",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return{type:this.getTypeName(L.videoSequence),id:e}}},{key:"video",value:function(e){return E({type:this.getTypeName(L.video),url:"",width:10,height:10,position:null},I(e))}},{key:"videoProjection",value:function(e){return this.mergeConfig(E({type:this.getTypeName(L.videoProjection),url:"",width:50,height:45,bwidth:10,barch:5,points:[],location:null},I(e)))}},{key:"region",value:function(e){return E({type:this.getTypeName(L.region),style:"default",geom:null},I(e))}},{key:"heatmap",value:function(e){return E({type:this.getTypeName(L.heatmap),pheight:100,minx:0,miny:0,maxx:0,maxy:0,gradient:{},points:[]},I(e))}}]),r}();const eo=new Qa;function sr(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,t)}return e}function to(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?sr(Object(e),!0).forEach(function(t){p(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):sr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}var no=Fe,Ee=pe,ro=kt,io=function(){function r(n,e){N(this,r),this._view3d=n,this._event=e.event,this._mapView=e,this.config=eo,this.create=new La(n,this),this.find=new Ia(n,this),this.remove=new Ra(n,this),this.update=new Aa(n,this),this.ACTOR=Ba}return V(r,[{key:"overLayerSelectObjectEdit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ee,t=this._view3d,i=this;if(v(t,"OverLayerSelectObjectEdit")){var a=function o(){i.overLayerStopEdit(),window.removeEventListener("contextmenu",o)};window.addEventListener("contextmenu",a),t.OverLayerSelectObjectEdit(function(o){e&&e(o)})}}},{key:"overLayerStartEdit",value:function(e,t){var i=this._view3d;if(v(i,"OverLayerStartEdit"))return S(10,i,i.OverLayerStartEdit,function(){i.OverLayerStartEdit(e,t)})}},{key:"overLayerStopEdit",value:function(){var e=this,t=this._view3d;if(v(t,"OverLayerStopEdit"))return S(10,t,t.OverLayerStopEdit,function(){e._event.reBind()})}},{key:"overLayerCreateObject",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:no,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this._view3d;if(v(a,"OverLayerCreateObject"))return U(a,a.OverLayerCreateObject,t,function(o){i&&e._event.reBind()})}},{key:"overLayerCreateObjects",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;t.length>200&&console.warn("OverLayerCreateObjects \u4E00\u6B21\u521B\u5EFA\u5BF9\u8C61\u7684\u6570\u91CF\u4E0D\u5E94\u8D85\u8FC7200\u4E2A\uFF0C\u4E0D\u7136\u6709\u5931\u8D25\u7684\u98CE\u9669\u3002");var a=this._view3d;if(v(a,"OverLayerCreateObjects"))return U(a,a.OverLayerCreateObjects,t,function(){i&&e._event.reBind()})}},{key:"findObjectById",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=this._view3d;if(v(t,"FindObjectById"))return U(t,t.FindObjectById,e)}},{key:"findObjectByPrefix",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,i=this._view3d;if(v(i,"FindObjectByPrefix"))return U(i,i.FindObjectByPrefix,e,t)}},{key:"overLayerUpdateObject",value:function(e){var t=this._view3d;v(t,"OverLayerUpdateObject")&&t.OverLayerUpdateObject(e)}},{key:"overLayerUpdateObjectAsync",value:function(e){var t=this._view3d;if(v(t,"OverLayerUpdateObject"))return S(20,t,t.OverLayerUpdateObject,e)}},{key:"updateObjectStyle",value:function(e,t){var i=this._view3d;v(i,"UpdateObjectStyle")&&i.UpdateObjectStyle(e,t)}},{key:"updateObjectStyleAsync",value:function(e,t){var i=this._view3d;if(v(i,"UpdateObjectStyle"))return S(20,i,i.UpdateObjectStyle,e,t)}},{key:"updateObject",value:function(e){var t=this._view3d;v(t,"UpdateObject")&&t.UpdateObject(e)}},{key:"updateObjectAsync",value:function(e){var t=this._view3d;if(v(t,"UpdateObject"))return S(20,t,t.UpdateObject,e)}},{key:"updateObjects",value:function(e){var t=this._view3d;v(t,"UpdateObjects")&&t.UpdateObjects(e)}},{key:"resetObjects",value:function(){var e=this._view3d;v(e,"ResetObjects")&&e.ResetObjects()}},{key:"updateObjectsAsync",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,i=this._view3d;if(v(i,"UpdateObjects"))return S(t,i,i.UpdateObjects,e)}},{key:"clearObjectStyle",value:function(){var e=this._view3d;v(e,"ClearObjectStyle")&&e.ClearObjectStyle()}},{key:"getObjectsVisible",value:function(){var e=this._view3d;if(v(e,"GetObjectsVisible"))return U(e,e.GetObjectsVisible)}},{key:"setObjectsVisible",value:function(e){var t=this._view3d;v(t,"SetObjectsVisible")&&t.SetObjectsVisible(e)}},{key:"setObjectsVisibleAsync",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,i=this._view3d;if(v(i,"SetObjectsVisible"))return S(t,i,i.SetObjectsVisible,e)}},{key:"updateObjectVisible",value:function(e,t){var i=this._view3d;v(i,"UpdateObjectVisible")&&i.UpdateObjectVisible(e,t)}},{key:"updateObjectVisibleAsync",value:function(e,t){var i=this._view3d;if(v(i,"UpdateObjectVisible"))return S(10,i,i.UpdateObjectVisible,e,t)}},{key:"overLayerRemoveObject",value:function(e){var t=this._view3d;v(t,"OverLayerRemoveObject")&&t.OverLayerRemoveObject(e)}},{key:"overLayerRemoveObjectById",value:function(e){var t=this._view3d;if(v(t,"OverLayerRemoveObjectById"))return S(20,t,t.OverLayerRemoveObjectById,e)}},{key:"overLayerRemoveObjectsById",value:function(e){var t=this._view3d;if(v(t,"OverLayerRemoveObjectsById"))return S(20,t,t.OverLayerRemoveObjectsById,e)}},{key:"overLayerRemoveAll",value:function(){var e=this._view3d;v(e,"OverLayerRemoveAll")&&e.OverLayerRemoveAll()}},{key:"setObjectHighlight",value:function(e){var t=this._view3d;if(v(t,"SetObjectHighlight"))return S(20,t,t.SetObjectHighlight,e)}},{key:"setObjectsHighlightByPrefix",value:function(e){if(!!e){var t=this._view3d;v(t,"SetObjectsHighlightByPrefix")&&t.SetObjectsHighlightByPrefix(e)}}},{key:"clearHighlight",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,a=this._view3d;if(v(a,"ClearHighlight"))return S(i,a,a.ClearHighlight,function(){t&&e._event.reBind()})}},{key:"layerLoad",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ee,i=this._view3d;v(i,"LayerLoad")&&i.LayerLoad(e,function(a){t(a)})}},{key:"layerLoadAsync",value:function(e){var t=this._view3d;if(v(t,"LayerLoad"))return U(t,t.LayerLoad,e)}},{key:"layerSetVisible",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this._view3d;v(i,"LayerSetVisible")&&i.LayerSetVisible(e,t)}},{key:"layerSetVisibleAsync",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this._view3d;if(v(i,"LayerSetVisible"))return S(20,i,i.LayerSetVisible,e,t)}},{key:"layerRemove",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=this._view3d;v(t,"LayerRemove")&&t.LayerRemove(e)}},{key:"layerRemoveAsync",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=this._view3d;if(v(t,"LayerRemove"))return S(20,t,t.LayerRemove,e)}},{key:"layerReLoad",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ee,i=this._view3d;v(i,"LayerReLoad")&&i.LayerReLoad(e,t)}},{key:"layerReLoadAsync",value:function(e){var t=this._view3d;if(v(t,"LayerReLoad"))return U(t,t.LayerReLoad,e)}},{key:"createRoute",value:function(e){var t=this._view3d;if(v(t,"CreateRoute"))return U(t,t.CreateRoute,e)}},{key:"playRoute",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ee,t=this._view3d;v(t,"CreateRoute")&&t.PlayRoute(function(i){e(i)})}},{key:"pauseRoute",value:function(){var e=this._view3d;v(e,"PauseRoute")&&e.PauseRoute()}},{key:"resumeRoute",value:function(e){var t=this._view3d;v(t,"resumeRoute")&&t.ResumeRoute(e)}},{key:"stopRoute",value:function(){var e=this._view3d;v(e,"StopRoute")&&e.StopRoute()}},{key:"playSequence",value:function(e){var t=this._view3d;v(t,"PlaySequence")&&t.PlaySequence(e)}},{key:"pauseSequence",value:function(e){var t=this._view3d;v(t,"PlaySequence")&&t.PlaySequence(e)}},{key:"stopSequence",value:function(e){var t=this._view3d;v(t,"StopSequence")&&t.StopSequence(e)}},{key:"isPlayingSequence",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ee,i=this._view3d;v(i,"IsPlayingSequence")&&i.IsPlayingSequence(e,t)}},{key:"isPausedSequence",value:function(e,t){var i=this._view3d;v(i,"IsPausedSequence")&&i.IsPausedSequence(e,t)}},{key:"streamVideoOpen",value:function(e){var t=this._view3d,i=to({url:"",width:10,height:9,position:null},ro(e));v(t,"StreamVideoOpen")&&t.StreamVideoOpen(i)}},{key:"streamVideoClose",value:function(){var e=this._view3d;v(e,"StreamVideoClose")&&e.StreamVideoClose()}},{key:"setHighlightRegion",value:function(e){var t=this._view3d,i={style:"default",geom:e};v(t,"SetHighlightRegion")&&t.SetHighlightRegion(i)}},{key:"clearHighlightRegion",value:function(){var e=this._view3d;v(e,"ClearHighlightRegion")&&e.ClearHighlightRegion()}}]),r}();function lr(r,n){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=ao(r))||n&&r&&typeof r.length=="number"){e&&(r=e);var t=0,i=function(){};return{s:i,n:function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,u;return{s:function(){e=e.call(r)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,u=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw u}}}}function ao(r,n){if(!!r){if(typeof r=="string")return cr(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return cr(r,n)}}function cr(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=r[e];return t}function fr(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,t)}return e}function dr(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?fr(Object(e),!0).forEach(function(t){p(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):fr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}var vr=_t,oo="MODEL_INSTANCE_TYPE",$e=function(){function r(n,e,t){N(this,r),this.$$typeof=oo,this.config=t,this.data=null,this.id=null,this.entity=new Map,this.type=e.category_id,this.typeName="\u6A21\u578B\u57FA\u7C7B",this.visible=!1,this.created=!1,this.mapViewer=n,this.setData(e)}return V(r,[{key:"_concatGid",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vr(),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vr();return"".concat(e,"_").concat(t)}},{key:"setState",value:function(e,t){this[e]=t}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(e){e&&(this.data=e,this.id=e.id)}},{key:"getEntity",value:function(e){return e?this.entity.get(e):this.entity}},{key:"getAllEntities",value:function(){return Array.from(this.entity.values())}},{key:"getEntityData",value:function(){return Array.from(this.entity.values()).map(function(e){return e.data})}},{key:"setEntity",value:function(e,t){this.entity.set(e,{gid:t.gid||t.attr.id,type:t.type,data:t,visible:t.visible})}},{key:"deleteEntity",value:function(e){this.entity.delete(e)}},{key:"getModel",value:function(){return this.entity.get("model")}},{key:"getIcon",value:function(){return this.entity.get("icon")}},{key:"setModel",value:function(e){this.setEntity("model",e)}},{key:"setIcon",value:function(e){this.setEntity("icon",e)}},{key:"getIconLocation",value:function(e){return e?dr(dr({},e),{},{z:e.z+20}):null}},{key:"setVisible",value:function(e){var t=this.mapViewer.drawer;if(e!==this.visible){var i=lr(this.entity.values()),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;t.updateObjectVisible(o.gid,e)}}catch(u){i.e(u)}finally{i.f()}this.markVisible(e)}}},{key:"markVisible",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.visible=e}},{key:"markCreated",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.created=e}},{key:"clearEntity",value:function(){this.entity.clear()}},{key:"flyTo",value:function(e){if(this.data.center){var t=this.data.center,i={x:t.x,y:t.y,z:t.z,pitch:t.pitch,yaw:t.yaw,roll:t.roll};this.mapViewer.camera.flyToPositionByOptions({position:i,duration:e.duration})}if(this.data.indoor){var a=this.data.build_id,o=this.data.floor_id,u=this.mapViewer.model,s=u.getAdapter();s.setVisible(a,o)}}},{key:"highlight",value:function(){var e=this.getModel(),t=this.mapViewer;return this.clearHighlight().then(function(){e&&t.drawer.setObjectHighlight(e==null?void 0:e.gid)}),this}},{key:"clearHighlight",value:function(){var e=this.mapViewer,t=e.drawer;return t.clearHighlight()}},{key:"create",value:function(){var e=this,t=this.config,i=this.data||{},a=this.mapViewer.drawer,o=this.mapViewer.event,u=JSON.parse(JSON.stringify(i)),s=function(d,l){l&&e.setModel(i),e.markCreated(!0),e.markVisible(!0),t.onSuccess(d)};t.draw?o.setMousePositionCallback(function(c){u.location=c,a.overLayerCreateObject(u).then(function(d){s(d,!0)})}):(e.setModel(u),t.onMap&&a.overLayerCreateObject(u).then(function(c){s(c,!1)}))}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.config,i=e.changes,a=e.data,o=this.mapViewer.drawer;if(t&&this.setState("config",t),a&&this.setState("data",a),i){var u=this.getModel(),s=this.getIcon();s&&(s.data.location=this.getIconLocation(i),o.overLayerUpdateObject(s.data)),u.data.location=i,o.overLayerUpdateObject(u.data)}}},{key:"destroy",value:function(){var e=this.entity,t=this.mapViewer.drawer,i=lr(e.entries()),a;try{for(i.s();!(a=i.n()).done;){var o=Gt(a.value,2),u=o[0],s=o[1];t.remove.one(s.data)}}catch(c){i.e(c)}finally{i.f()}this.clearEntity()}}]),r}();p($e,"CATEGORY","MODEL");function P(r){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(r)}function uo(r,n){for(;!Object.prototype.hasOwnProperty.call(r,n)&&(r=P(r),r!==null););return r}function Q(){return typeof Reflect<"u"&&Reflect.get?Q=Reflect.get.bind():Q=function(n,e,t){var i=uo(n,e);if(!!i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?n:t):a.value}},Q.apply(this,arguments)}function jt(r,n){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},jt(r,n)}function me(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&jt(r,n)}function $(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function be(r,n){if(n&&(ee(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $(r)}function hr(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,t)}return e}function pr(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?hr(Object(e),!0).forEach(function(t){p(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):hr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}function so(r){var n=lo();return function(){var t=P(r),i;if(n){var a=P(this).constructor;i=Reflect.construct(t,arguments,a)}else i=t.apply(this,arguments);return be(this,i)}}function lo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var gr=Fe,co=pe,O=function(r){me(e,r);var n=so(e);function e(t){var i;N(this,e);for(var a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];return i=n.call.apply(n,[this,t].concat(o)),e.mapViewer=t,i.category=e.model,i.categoryName="\u76D1\u63A7",i.type=ar,i.typeName="\u76D1\u63A7",i.fileName="qiangji",i}return V(e,[{key:"setModelVisible",value:function(){}},{key:"setIconVisible",value:function(){}},{key:"getArea",value:function(){return this.entity.get("area")}},{key:"setArea",value:function(i){this.setEntity("area",i)}},{key:"flyTo",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{speed:40,showLocation:!1};return Q(P(e.prototype),"flyTo",this).call(this,i),this}},{key:"create",value:function(){var i,a=this,o=this.config,u=this.data||gr,s=this.mapViewer.drawer,c=this.mapViewer.event,d=s.config.model({attr:{id:u.id,gid:this._concatGid(e.model,u.id)},gid:this._concatGid(e.model,u.id),fileName:this.fileName,scale:1,location:(u==null||(i=u.options)===null||i===void 0?void 0:i.location)||null}),l=s.config.image({attr:{id:u.id,gid:this._concatGid(e.icon,u.id)},gid:this._concatGid(e.icon,u.id),style:this.fileName+"_icon",location:a.getIconLocation(d==null?void 0:d.location)}),g=function(A,R){R&&(a.setModel(d),a.setIcon(l)),a.markVisible(!0),a.markCreated(!0),o.onSuccess(A)};return o.draw?c.setMousePositionCallback(function(b){d.location=b,l.location=a.getIconLocation(b),s.create.image(l),s.create.model(d,!0).then(function(A){g(A,!0)})}):(a.setModel(d),a.setIcon(l),o.onMap&&(s.create.model(d),s.create.image(l,!0).then(function(b){g(b,!1)}))),this}},{key:"update",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Q(P(e.prototype),"update",this).call(this,i),this}},{key:"destroy",value:function(){Q(P(e.prototype),"destroy",this).call(this)}},{key:"updateImage",value:function(){}},{key:"updateText",value:function(){}},{key:"updateVisibleArea",value:function(){}},{key:"createArea",value:function(){var i=this.data||gr,a=this.mapViewer.drawer,o=this;if(i.camera_area){var u=this.getEntity("area");if(u)this.setAreaVisible(!0);else{var s=a.config.polygon(pr(pr({attr:{id:i.id}},i.camera_area),{},{gid:this._concatGid(e.area,i.id)}));a.create.polygon(s,!0).then(function(c){o.setArea(c)})}}}},{key:"drawArea",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:co,a=this.mapViewer,o=this,u=this._concatGid(e.area,this.data.id);a.drawer.create.drawPolygon({gid:u,attr:{id:this.data.id},onFinish:function(c){c&&o.setArea(c),i(c)}})}},{key:"clearArea",value:function(){var i=this.mapViewer.drawer,a=this.getArea();this.deleteEntity("area"),i.remove.one(a.data)}},{key:"setVisible",value:function(i){return Q(P(e.prototype),"setVisible",this).call(this,i),this}},{key:"setAreaVisible",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=this.mapViewer.drawer,o=this.getEntity("area");o&&a.updateObjectVisible(o.gid,i)}}]),e}($e);p(O,"mapViewer",null),p(O,"model","$CAMERA"),p(O,"icon","$ICON_CAMERA"),p(O,"area","$AREA_CAMERA"),p(O,"_getModelInstance",function(r){if(!r)return null;if(!!O.mapViewer){var n=O.mapViewer.model,e=n.getAdapter(),t=e.getSelector();return t.selectEntityById(r.attr.id)}}),p(O,"modelClickHandler",function(r){var n=O._getModelInstance(r);n&&n.flyTo()}),p(O,"modelDoubleClickHandler",function(r){var n=O._getModelInstance(r);n&&n.flyTo()}),p(O,"iconClickHandler",function(r){var n=O._getModelInstance(r);n&&n.flyTo()}),p(O,"iconDoubleClickHandler",function(r){var n=O._getModelInstance(r);n&&n.flyTo()}),p(O,"areaClickHandler",function(r){var n=O._getModelInstance(r);n&&n.flyTo()}),p(O,"areaDoubleClickHandler",function(r){var n=O._getModelInstance(r);n&&n.flyTo()});function fo(r){var n=vo();return function(){var t=P(r),i;if(n){var a=P(this).constructor;i=Reflect.construct(t,arguments,a)}else i=t.apply(this,arguments);return be(this,i)}}function vo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var D=function(r){me(e,r);var n=fo(e);function e(t){var i;N(this,e);for(var a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];return i=n.call.apply(n,[this,t].concat(o)),e.mapViewer=t,i.category=e.model,i.categoryName="\u95E8\u7981",i.type=Bt,i.typeName="\u95E8\u7981",i.fileName="menjin",i.create(),i}return V(e,[{key:"create",value:function(){var i,a=this,o=this,u=this.config,s=this.data||{},c=this.mapViewer.drawer,d=this.mapViewer.event,l=c.config.model({attr:{id:s.id},gid:this._concatGid(e.model,s.id),fileName:this.fileName,scale:1,location:(s==null||(i=s.options)===null||i===void 0?void 0:i.location)||null}),g=c.config.image({attr:{id:s.id},gid:this._concatGid(e.icon,s.id),style:this.fileName+"_icon",location:o.getIconLocation(l==null?void 0:l.location)});u.draw?d.setMousePositionCallback(function(b){l.location=b,g.location=o.getIconLocation(b),c.create.image(g),c.create.model(l,!0).then(function(A){u.onSuccess(A)}),o.setModel(l),o.setIcon(g),a.markVisible(!0)}):(o.setModel(l),o.setIcon(g),u.onMap&&(c.create.model(l),c.create.image(g,!0),this.markVisible(!0)))}},{key:"flyTo",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{speed:40,showLocation:!1};return Q(P(e.prototype),"flyTo",this).call(this,i),this}},{key:"update",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Q(P(e.prototype),"update",this).call(this,i),this}},{key:"setVisible",value:function(i){return Q(P(e.prototype),"setVisible",this).call(this,i),this}}]),e}($e);p(D,"mapViewer",null),p(D,"model","$DOOR"),p(D,"icon","$ICON_DOOR"),p(D,"_getModelInstance",function(r){if(!r)return null;if(!!D.mapViewer){var n=D.mapViewer.model,e=n.getDeviceAdapter(),t=e.getSelector();return t.selectEntityById(r.attr.id)}}),p(D,"modelClickHandler",function(r){console.log(r);var n=D._getModelInstance(r);n&&n.flyTo()}),p(D,"modelDoubleClickHandler",function(r){console.log(r);var n=D._getModelInstance(r);n&&n.flyTo()}),p(D,"iconClickHandler",function(r){console.log(r);var n=D._getModelInstance(r);n&&n.flyTo()}),p(D,"iconDoubleClickHandler",function(r){console.log(r);var n=D._getModelInstance(r);n&&n.flyTo()});function ho(r){var n=po();return function(){var t=P(r),i;if(n){var a=P(this).constructor;i=Reflect.construct(t,arguments,a)}else i=t.apply(this,arguments);return be(this,i)}}function po(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var B=function(r){me(e,r);var n=ho(e);function e(t){var i;N(this,e);for(var a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];return i=n.call.apply(n,[this,t].concat(o)),e.mapViewer=t,i.category=e.model,i.categoryName="\u5BF9\u8BB2",i.type=Bt,i.typeName="\u5BF9\u8BB2",i.fileName="duijiang",i.create(),i}return V(e,[{key:"create",value:function(){var i,a=this,o=this,u=this.config,s=this.data||{},c=this.mapViewer.drawer,d=this.mapViewer.event,l=c.config.model({attr:{id:s.id},gid:this._concatGid(e.model,s.id),fileName:this.fileName,scale:1,location:(s==null||(i=s.options)===null||i===void 0?void 0:i.location)||null}),g=c.config.image({attr:{id:s.id},gid:this._concatGid(e.icon,s.id),style:this.fileName+"_icon",location:o.getIconLocation(l==null?void 0:l.location)});u.draw?d.setMousePositionCallback(function(b){l.location=b,g.location=o.getIconLocation(b),c.create.image(g),c.create.model(l,!0).then(function(A){u.onSuccess(A)}),o.setModel(l),o.setIcon(g),a.markVisible(!0)}):(o.setModel(l),o.setIcon(g),u.onMap&&(c.create.model(l),c.create.image(g,!0),this.markVisible(!0)))}},{key:"flyTo",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{speed:40,showLocation:!1};return Q(P(e.prototype),"flyTo",this).call(this,i),this}},{key:"update",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Q(P(e.prototype),"update",this).call(this,i),this}},{key:"setVisible",value:function(i){return Q(P(e.prototype),"setVisible",this).call(this,i),this}}]),e}($e);p(B,"mapViewer",null),p(B,"model","$INTERCOM"),p(B,"icon","$ICON_INTERCOM"),p(B,"_getModelInstance",function(r){if(!r)return null;if(!!B.mapViewer){var n=B.mapViewer.model,e=n.getDeviceAdapter(),t=e.getSelector();return t.selectEntityById(r.attr.id)}}),p(B,"modelClickHandler",function(r){console.log(r);var n=B._getModelInstance(r);n&&n.flyTo()}),p(B,"modelDoubleClickHandler",function(r){console.log(r);var n=B._getModelInstance(r);n&&n.flyTo()}),p(B,"iconClickHandler",function(r){console.log(r);var n=B._getModelInstance(r);n&&n.flyTo()}),p(B,"iconDoubleClickHandler",function(r){console.log(r);var n=B._getModelInstance(r);n&&n.flyTo()});function yr(r,n){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=go(r))||n&&r&&typeof r.length=="number"){e&&(r=e);var t=0,i=function(){};return{s:i,n:function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,u;return{s:function(){e=e.call(r)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,u=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw u}}}}function go(r,n){if(!!r){if(typeof r=="string")return mr(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return mr(r,n)}}function mr(r,n){(n==null||n>r.length)&&(n=r.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=r[e];return t}function br(r,n){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);n&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,t)}return e}function Pt(r){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?br(Object(e),!0).forEach(function(t){p(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):br(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}var yo=ae,x={isOnce:!1,defaultAction:!0},Nt=function(){function r(n){N(this,r),p(this,"listen",function(){}),this.mapViewer=n,this.events=new Map,this.config=Pt({},x)}return V(r,[{key:"config",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x;this.config=Pt(Pt({},x),e)}},{key:"getConfig",value:function(e){var t=this.events.get(e);return t?t.get("config"):null}},{key:"subscribe",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x,a=this.events.get(e),o=new Map;if(o.set("callback",t),o.set("config",i),a){var u=a.get("queue");u.add(o),a.set("config",i)}else{var s=new Map,c=new Set;c.add(o),s.set("queue",c),s.set("config",i),this.events.set(e,s)}}},{key:"unsubscribe",value:function(e,t){var i=this.events.get(e);if(i){var a=i.get("queue"),o=yr(a.values()),u;try{for(o.s();!(u=o.n()).done;){var s=u.value;s.get("callback")===t&&a.delete(s)}}catch(c){o.e(c)}finally{o.f()}a.size===0&&this.events.delete(e)}}},{key:"dispatch",value:function(e){var t=this.events.get(e);if(t){for(var i=t.get("queue"),a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];var s=yr(i.values()),c;try{for(s.s();!(c=s.n()).done;){var d=c.value,l=d.get("callback"),g=d.get("config");yo(l)&&l.apply(void 0,o),g&&g.isOnce&&this.unsubscribe(e,l)}}catch(b){s.e(b)}finally{s.f()}}}},{key:"clear",value:function(){this.events.clear()}},{key:"onClick",value:function(e){}},{key:"offClick",value:function(e){}},{key:"onDoubleClick",value:function(e){}},{key:"offDoubleClick",value:function(e){}},{key:"onIconClick",value:function(e){}},{key:"offIconClick",value:function(e){}},{key:"onIconDoubleClick",value:function(e){}},{key:"offIconDoubleClick",value:function(e){}},{key:"onMouseIn",value:function(){}},{key:"onMouseOut",value:function(){}},{key:"_modelClickHandler",value:function(){}},{key:"_modelDoubleClickHandler",value:function(){}},{key:"_iconClickHandler",value:function(){}},{key:"_iconDoubleClickHandler",value:function(){}}]),r}();function mo(r){var n=bo();return function(){var t=P(r),i;if(n){var a=P(this).constructor;i=Reflect.construct(t,arguments,a)}else i=t.apply(this,arguments);return be(this,i)}}function bo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var we=function(r){me(e,r);var n=mo(e);function e(t){var i;return N(this,e),i=n.call(this,t),p($(i),"listen",function(){var a=i.mapViewer.event;a.onClick(O.model,i._modelClickHandler.bind($(i)),{compare:function(u,s){return s.startsWith(O.model)}}),a.onDoubleClick(O.model,i._modelDoubleClickHandler.bind($(i)),{compare:function(u,s){return s.startsWith(O.model)}}),a.onClick(O.icon,i._iconClickHandler.bind($(i)),{compare:function(u,s){return s.startsWith(O.icon)}}),a.onDoubleClick(O.icon,i._iconDoubleClickHandler.bind($(i)),{compare:function(u,s){return s.startsWith(O.icon)}}),a.onClick(O.area,i._areaClickHandler.bind($(i)),{compare:function(u,s){return s.startsWith(O.area)}}),a.onDoubleClick(O.area,i._areaDoubleClickHandler.bind($(i)),{compare:function(u,s){return s.startsWith(O.area)}})}),i.listen(),i}return V(e,[{key:"_modelClickHandler",value:function(i){var a=this.getConfig(e.MODEL_CLICK);if(a){var o=a.defaultAction;o&&O.modelClickHandler(i),this.dispatch(e.MODEL_CLICK,i)}}},{key:"_modelDoubleClickHandler",value:function(i){var a=this.getConfig(e.MODEL_DOUBLE_CLICK);if(a){var o=a.defaultAction;o&&O.modelDoubleClickHandler(i),this.dispatch(e.MODEL_DOUBLE_CLICK,i)}}},{key:"_iconClickHandler",value:function(i){var a=this.getConfig(e.ICON_CLICK);if(a){var o=a.defaultAction;o&&O.iconClickHandler(i),this.dispatch(e.ICON_CLICK,i)}}},{key:"_iconDoubleClickHandler",value:function(i){var a=this.getConfig(e.ICON_DOUBLE_CLICK);if(a){var o=a.defaultAction;o&&O.iconDoubleClickHandler(i),this.dispatch(e.ICON_DOUBLE_CLICK,i)}}},{key:"_areaClickHandler",value:function(i){var a=this.getConfig(e.AREA_CLICK);if(a){var o=a.defaultAction;o&&O.areaClickHandler(i),this.dispatch(e.AREA_CLICK,i)}}},{key:"_areaDoubleClickHandler",value:function(i){var a=this.getConfig(e.AREA_DOUBLE_CLICK);if(a){var o=a.defaultAction;o&&O.areaDoubleClickHandler(i),this.dispatch(e.AREA_DOUBLE_CLICK,i)}}},{key:"clear",value:function(){}},{key:"onClick",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.subscribe(e.MODEL_CLICK,i,a)}},{key:"offClick",value:function(i){this.unsubscribe(e.MODEL_CLICK,i)}},{key:"onDoubleClick",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.subscribe(e.MODEL_DOUBLE_CLICK,i,a)}},{key:"offDoubleClick",value:function(i){this.unsubscribe(e.MODEL_DOUBLE_CLICK,i)}},{key:"onIconClick",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.subscribe(e.ICON_CLICK,i,a)}},{key:"offIconClick",value:function(i){this.unsubscribe(e.ICON_DOUBLE_CLICK,i)}},{key:"onIconDoubleClick",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.subscribe(e.ICON_DOUBLE_CLICK,i,a)}},{key:"offIconDoubleClick",value:function(i){this.unsubscribe(e.ICON_DOUBLE_CLICK,i)}},{key:"onAreaClick",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.subscribe(e.AREA_CLICK,i,a)}},{key:"offAreaClick",value:function(i){this.unsubscribe(e.AREA_CLICK,i)}},{key:"onAreaDoubleClick",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.subscribe(e.AREA_DOUBLE_CLICK,i,a)}},{key:"offAreaDoubleClick",value:function(i){this.unsubscribe(e.AREA_DOUBLE_CLICK,i)}}]),e}(Nt);p(we,"MODEL_CLICK","MODEL_CLICK"),p(we,"MODEL_DOUBLE_CLICK","MODEL_DOUBLE_CLICK"),p(we,"ICON_CLICK","ICON_CLICK"),p(we,"ICON_DOUBLE_CLICK","ICON_DOUBLE_CLICK"),p(we,"AREA_CLICK","AREA_CLICK"),p(we,"AREA_DOUBLE_CLICK","AREA_DOUBLE_CLICK");function wo(r){var n=Co();return function(){var t=P(r),i;if(n){var a=P(this).constructor;i=Reflect.construct(t,arguments,a)}else i=t.apply(this,arguments);return be(this,i)}}function Co(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var xe=function(r){me(e,r);var n=wo(e);function e(t){var i;return N(this,e),i=n.call(this,t),p($(i),"listen",function(){var a=i.mapViewer.event;a.onClick(D.model,i._modelClickHandler.bind($(i)),{compare:function(u,s){return s.startsWith(D.model)}}),a.onDoubleClick(D.model,i._modelDoubleClickHandler.bind($(i)),{compare:function(u,s){return s.startsWith(D.model)}}),a.onClick(D.icon,i._iconClickHandler.bind($(i)),{compare:function(u,s){return s.startsWith(D.icon)}}),a.onDoubleClick(D.icon,i._iconDoubleClickHandler.bind($(i)),{compare:function(u,s){return s.startsWith(D.icon)}})}),i.listen(),i}return V(e,[{key:"_modelClickHandler",value:function(i){var a=this.getConfig(e.MODEL_CLICK);if(a){var o=a.defaultAction;o&&D.modelClickHandler(i),this.dispatch(e.MODEL_CLICK,i)}}},{key:"_modelDoubleClickHandler",value:function(i){var a=this.getConfig(e.MODEL_DOUBLE_CLICK);if(a){var o=a.defaultAction;o&&D.modelDoubleClickHandler(i),this.dispatch(e.MODEL_DOUBLE_CLICK,i)}}},{key:"_iconClickHandler",value:function(i){var a=this.getConfig(e.ICON_CLICK);if(a){var o=a==null?void 0:a.defaultAction;o&&D.iconClickHandler(i),this.dispatch(e.ICON_CLICK,i)}}},{key:"_iconDoubleClickHandler",value:function(i){var a=this.getConfig(e.ICON_DOUBLE_CLICK);if(a){var o=a.defaultAction;o&&D.iconDoubleClickHandler(i),this.dispatch(e.ICON_DOUBLE_CLICK,i)}}},{key:"onClick",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.subscribe(e.MODEL_CLICK,i,a)}},{key:"offClick",value:function(i){this.unsubscribe(e.MODEL_CLICK,i)}},{key:"onDoubleClick",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.subscribe(e.MODEL_DOUBLE_CLICK,i,a)}},{key:"offDoubleClick",value:function(i){this.unsubscribe(e.MODEL_DOUBLE_CLICK,i)}},{key:"onIconClick",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.subscribe(e.ICON_CLICK,i,a)}},{key:"offIconClick",value:function(i){this.unsubscribe(e.ICON_DOUBLE_CLICK,i)}},{key:"onIconDoubleClick",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.subscribe(e.ICON_DOUBLE_CLICK,i,a)}},{key:"offIconDoubleClick",value:function(i){this.unsubscribe(e.ICON_DOUBLE_CLICK,i)}}]),e}(Nt);p(xe,"MODEL_CLICK","MODEL_CLICK"),p(xe,"MODEL_DOUBLE_CLICK","MODEL_DOUBLE_CLICK"),p(xe,"ICON_CLICK","ICON_CLICK"),p(xe,"ICON_DOUBLE_CLICK","ICON_DOUBLE_CLICK");function Oo(r){var n=ko();return function(){var t=P(r),i;if(n){var a=P(this).constructor;i=Reflect.construct(t,arguments,a)}else i=t.apply(this,arguments);return be(this,i)}}function ko(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ke=function(r){me(e,r);var n=Oo(e);function e(t){var i;return N(this,e),i=n.call(this,t),p($(i),"listen",function(){var a=i.mapViewer.event;a.onClick(B.model,i._modelClickHandler.bind($(i)),{compare:function(u,s){return s.startsWith(B.model)}}),a.onDoubleClick(B.model,i._modelDoubleClickHandler.bind($(i)),{compare:function(u,s){return s.startsWith(B.model)}}),a.onClick(B.icon,i._iconClickHandler.bind($(i)),{compare:function(u,s){return s.startsWith(B.icon)}}),a.onDoubleClick(B.icon,i._iconDoubleClickHandler.bind($(i)),{compare:function(u,s){return s.startsWith(B.icon)}})}),i.listen(),i}return V(e,[{key:"_modelClickHandler",value:function(i){var a=this.getConfig(e.MODEL_CLICK);if(a){var o=a.defaultAction;o&&B.modelClickHandler(i),this.dispatch(e.MODEL_CLICK,i)}}},{key:"_modelDoubleClickHandler",value:function(i){var a=this.getConfig(e.MODEL_DOUBLE_CLICK);if(a){var o=a.defaultAction;o&&B.modelDoubleClickHandler(i),this.dispatch(e.MODEL_DOUBLE_CLICK,i)}}},{key:"_iconClickHandler",value:function(i){var a=this.getConfig(e.ICON_CLICK);if(a){var o=a.defaultAction;o&&B.iconClickHandler(i),this.dispatch(e.ICON_CLICK,i)}}},{key:"_iconDoubleClickHandler",value:function(i){var a=this.getConfig(e.ICON_DOUBLE_CLICK);if(a){var o=a.defaultAction;o&&B.iconDoubleClickHandler(i),this.dispatch(e.ICON_DOUBLE_CLICK,i)}}},{key:"onClick",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.subscribe(e.MODEL_CLICK,i,a)}},{key:"offClick",value:function(i){this.unsubscribe(e.MODEL_CLICK,i)}},{key:"onDoubleClick",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.subscribe(e.MODEL_DOUBLE_CLICK,i,a)}},{key:"offDoubleClick",value:function(i){this.unsubscribe(e.MODEL_DOUBLE_CLICK,i)}},{key:"onIconClick",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.subscribe(e.ICON_CLICK,i,a)}},{key:"offIconClick",value:function(i){this.unsubscribe(e.ICON_DOUBLE_CLICK,i)}},{key:"onIconDoubleClick",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;this.subscribe(e.ICON_DOUBLE_CLICK,i,a)}},{key:"offIconDoubleClick",value:function(i){this.unsubscribe(e.ICON_DOUBLE_CLICK,i)}}]),e}(Nt);p(Ke,"MODEL_CLICK","MODEL_CLICK"),p(Ke,"MODEL_DOUBLE_CLICK","MODEL_DOUBLE_CLICK"),p(Ke,"ICON_CLICK","ICON_CLICK"),p(Ke,"ICON_DOUBLE_CLICK","ICON_DOUBLE_CLICK");var he=ae,_o=function(){function r(n){N(this,r),this.view3d=n}return V(r,[{key:"isBuildWK",value:function(e){return/^V[\d]+_JZ[\d]+_WK$/.test(e)}},{key:"isBuildTitle",value:function(e){return/^MP_V[\d]+_JZ[\d]+_WK_?[\d]?$/.test(e)&&this.isBuildFloor(e)===!1}},{key:"isBuildFloor",value:function(e){return/^V[0]+[\d]+_JZ[0]+[\d]+_WK_[FWMB][\d]+$/.test(e)}},{key:"isBuildXP",value:function(e){return/^V[0]+[\d]+_JZ[0]+[\d]+_WK_XP[\d]*$/.test(e)}},{key:"isFloorXP",value:function(e){return/^V[0]+[\d]+_JZ[0]+[\d]+_WK_[FWMB][\d]+_XP[\d]*$/.test(e)}},{key:"isFloorRoom",value:function(e){return/^V[0]+[\d]+_JZ[0]+[\d]+_WK_[FWMB][\d]+_[U][\d]+_[H][\d]+$/.test(e)}},{key:"getBuildIdByWKGid",value:function(e){return e.replace(/_WK.*/,"")}},{key:"getBuildGidByBuildId",value:function(e){return e.replace(/JZ([\d]+)(_?)/,"JZ$1_WK$2")}},{key:"getBuildIdByTitleGid",value:function(e){return e.replace(/_WK.*/,"").replace(/MP_/,"")}},{key:"getBuildIdByFloorGid",value:function(e){return e.replace(/_WK.*/,"")}},{key:"getBuildIdByRoomGid",value:function(e){return e.split("_WK")[0]}},{key:"getFloorIdByRoomGid",value:function(e){var t=e.split("_");return"".concat(t[0],"_").concat(t[1],"_").concat(t[3])}},{key:"getFloorIdByFloorGid",value:function(e){return e.replace(/_WK/,"")}},{key:"getFloorNameByFloorId",value:function(e){return e.split("_")[2]}},{key:"getFloorNameSmallByFloorGId",value:function(e){var t=this.getFloorIdByFloorGid(e);return this.getFloorNameSmallByFloorId(t)}},{key:"getFloorNameSmallByFloorId",value:function(e){return this.getFloorNameByFloorId(e).replace(/([A-Z]*)[0]*([1-9][\d]*)/,"$1$2")}},{key:"getF001toF1",value:function(e){return e.replace(/([\w])[0]*([\d]+)/,"$1$2")}},{key:"resetBuild",value:function(e){this.splitBuildingResetSync(e),this.view3d.ResetObjects()}},{key:"splitFloor",value:function(e,t,i){this.view3d&&this.view3d.SplitDynamicFloor(e,t,i)}},{key:"getBuildingNum",value:function(e){he(e)===!0?this.view3d.GetBuildingNum(function(t){e&&e(t)}):console.error("cb \u4E0D\u662F\u51FD\u6570")}},{key:"getBuildingNames",value:function(e){he(e)===!0?this.view3d.GetBuildingNames(function(t){e&&e(t)}):console.error("cb \u4E0D\u662F\u51FD\u6570")}},{key:"getBuildingNamesSync",value:function(){return U(this.view3d,this.view3d.GetBuildingNames)}},{key:"getBuildingVisible",value:function(e,t){he(t)===!0?this.view3d.GetBuildingVisible(e,function(i){t&&t(i)}):console.error("cb \u4E0D\u662F\u51FD\u6570")}},{key:"setBuildingVisible",value:function(e,t,i){return S(100,this.view3d,this.view3d.SetBuildingVisible,e,t,i)}},{key:"setBuildingWKVisible",value:function(e,t,i){this.view3d.SetBuildingWkVisible(e,t,i)}},{key:"resetAllBuildings",value:function(){return S(10,this.view3d,this.view3d.ResetAllBuildings)}},{key:"splitBuilding",value:function(e,t){this.view3d.SplitBuilding(e,t)}},{key:"splitBuildingReset",value:function(e){this.view3d.SplitBuildingReset(e)}},{key:"splitBuildingResetSync",value:function(e){return S(20,this.view3d,this.view3d.SplitBuildingReset,e)}},{key:"splitDynamicBuilding",value:function(e,t){this.view3d.SplitDynamicBuilding(e,t)}},{key:"splitDynamicFloor",value:function(e,t,i){this.view3d.SplitDynamicFloor(e,t,i)}},{key:"splitFloorReset",value:function(e,t){return this.view3d.SplitFloorReset(e,t)}},{key:"getFloorNum",value:function(e,t){he(t)===!0?this.view3d.GetFloorNum(function(i){t&&t(i)}):console.error("cb \u4E0D\u662F\u51FD\u6570")}},{key:"getFloorNames",value:function(e,t){console.log("call getFloorNames: ",e),console.log(he(t)),he(t)?this.view3d.GetFloorNames(e,t):console.error("cb \u4E0D\u662F\u51FD\u6570")}},{key:"getFloorNamesSync",value:function(e){return U(this.view3d,this.view3d.GetFloorNames,e)}},{key:"getFloorVisible",value:function(e,t,i){he(i)===!0?this.view3d.GetFloorVisible(e,t,function(a){i&&i(a)}):console.error("cb \u4E0D\u662F\u51FD\u6570")}},{key:"setFloorVisible",value:function(e,t,i,a){return S(10,this.view3d,this.view3d.SetFloorVisible,e,t,i,a)}},{key:"getUpFloorNum",value:function(e,t,i){he(i)===!0?this.view3d.GetUpFloorNum(e,t,function(a){i&&i(a)}):console.error("cb \u4E0D\u662F\u51FD\u6570")}},{key:"getUpFloorNames",value:function(e,t,i){this.view3d.GetUpFloorNames(e,t,function(a){i&&i(a)})}},{key:"getDownFloorNum",value:function(e,t,i){this.view3d.GetDownFloorNum(e,t,function(a){i&&i(a)})}},{key:"GetDownFloorNames",value:function(e,t,i){this.view3d.GetDownFloorNum(e,t,function(a){i&&i(a)})}},{key:"getFloorRoomNum",value:function(e,t,i){this.view3d.GetFloorRoomNum(e,t,function(a){i&&i(a)})}},{key:"getFloorRoomNames",value:function(e,t,i){return U(this.view3d,this.view3d.GetFloorRoomNames,e,t)}},{key:"getFloorRoomVisible",value:function(e,t,i,a){this.view3d.GetFloorRoomVisible(e,t,i,function(o){a&&a(o)})}},{key:"setFloorRoomVisible",value:function(e,t,i,a){this.view3d.SetFloorRoomVisible(e,t,i,a)}},{key:"setGroundVisible",value:function(){var n=G(_.mark(function t(i){return _.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",S(10,this.view3d,this.view3d.SetGroundVisible,i));case 1:case"end":return o.stop()}},t,this)}));function e(t){return n.apply(this,arguments)}return e}()}]),r}(),Eo=ae,wr=pe,So={id:"mapv3d-container",url:"",projectId:"",token:"",mapkey:"",manual:!1,loading:!0,northControl:!1,enableKeyboard:!0,enableMouse:!0,defaultLocate:!0,autoResize:!0,autoResizeTicker:300,defaultSetResolution:!1,resolutionScale:1,resetBuildings:!0,internalMouseVisible:!1,complete:wr,error:wr},Lo=function(){function r(n){N(this,r),this._initFinished=!1,this.core=new wa,this.config=Object.assign({},So,n),this.config.manual||this._init(),this.event=null,this.build=null,this.camera=null,this.drawer=null,this.model=null,this.scheduler=er,_r()}return V(r,[{key:"create",value:function(){if(this._initFinished){wt("MapViewer is already initialize.");return}this._init()}},{key:"_init",value:function(){var e=this;this.core.createMap(this.config).then(function(){var t=e.core.view3d;t&&(e.build=new _o(t,e),e.camera=new _a(t,e),e.drawer=new io(t,e),e._initFinished=!0,e.config.complete&&Eo(e.config.complete)&&e.config.complete(t))})}}]),r}(),Io="MapV3D \u4E09\u7EF4\u5730\u7403\u6846\u67B6",Ao="http://www.aimapvision.com/",Ro="\u56FE\u6D0B\u79D1\u6280",Do=Mt(),Bo=Vt(),jo=kr,Po=Za;W.CATEGORY=Po,W.MapViewer=Lo,W.author=Ro,W.env=jo,W.error=Ui,W.name=Io,W.scheduler=er,W.update=Bo,W.utils=sa,W.version=Do,W.website=Ao,Object.defineProperties(W,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=mapv3d-src.umd.js.map
